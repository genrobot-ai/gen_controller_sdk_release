#!/usr/bin/env python3
# 混淆的pack模块
import sys
import os
import base64

_script_dir = os.path.dirname(os.path.abspath(__file__))
if _script_dir not in sys.path:
  sys.path.insert(0, _script_dir)

ENCODED_SOURCE = '''
aW1wb3J0IHN0cnVjdApmcm9tIGVudW0gaW1wb3J0IEVudW0KZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgb3MKCmNsYXNzIFBhY2tUeXBlKEVudW0pOgogICAgUGFja1R5cGVDTUQgPSAiQ01EIgogICAgUGFja1R5cGVNZXNzYWdlID0gIk1lc3NhZ2UiCgoKY2xhc3MgUGFja0NvbnRlbnQ6CiAgICBNYWdpYyA9IGIiZGFzXHJcbiIKCgpjbGFzcyBPcGNvZGUoRW51bSk6CiAgICBSZWFkU2luZ2xlID0gMHgwMQogICAgUmVhZEJhdGNoID0gMHgwMgogICAgV3JpdGVEcml2ZSA9IDB4MDMKICAgIEVjaG8gPSAweDA0CiAgICBDYWxpYkVuY29kZXIgPSAweDA1CiAgICBEaXNhYmxlRHJpdmUgPSAweDA2CgoKY2xhc3MgUmVjb3JkVHlwZShFbnVtKToKICAgIFRhY3RpbGUgPSAweDAxCiAgICBFbmNvZGVyID0gMHgwMgogICAgRHJpdmUgPSAweDAzCiAgICBFY2hvID0gMHgwNAoKCmNsYXNzIFJlY29yZChvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHJlY29yZF90eXBlOiBSZWNvcmRUeXBlLCByZWNvcmRfZGF0YTogYnl0ZXMpOgogICAgICAgIHNlbGYucmVjb3JkX3R5cGUgPSByZWNvcmRfdHlwZQogICAgICAgIHNlbGYucmVjb3JkX2NvbnRlbnRfbGVuZ3RoID0gbGVuKHJlY29yZF9kYXRhKQogICAgICAgIHNlbGYucmVjb3JkX2RhdGEgPSByZWNvcmRfZGF0YQoKICAgIGRlZiBwYWNrKHNlbGYpIC0+IGJ5dGVzOgogICAgICAgIHBhY2tldCA9IGIiIgogICAgICAgIHBhY2tldCArPSBzdHJ1Y3QucGFjaygiQiIsIHNlbGYucmVjb3JkX3R5cGUudmFsdWUpCiAgICAgICAgcGFja2V0ICs9IHN0cnVjdC5wYWNrKAogICAgICAgICAgICAiPFEiLCBzZWxmLnJlY29yZF9jb250ZW50X2xlbmd0aAogICAgICAgICkgICMgPFEg6KGo56S65bCP56uv5peg56ym5Y+3NjTkvY3mlbTmlbAKICAgICAgICBwYWNrZXQgKz0gc2VsZi5yZWNvcmRfZGF0YQogICAgICAgIHJldHVybiBwYWNrZXQKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICJyZWNvcmRfdHlwZToge30sIHJlY29yZF9jb250ZW50X2xlbmd0aDoge30sIHJlY29yZF9kYXRhOiB7fVxuIi5mb3JtYXQoCiAgICAgICAgICAgIHNlbGYucmVjb3JkX3R5cGUsIHNlbGYucmVjb3JkX2NvbnRlbnRfbGVuZ3RoLCBzZWxmLnJlY29yZF9kYXRhCiAgICAgICAgKQoKCmNsYXNzIFBhY2sob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIHBhY2tfdHlwZTogUGFja1R5cGUgPSBQYWNrVHlwZS5QYWNrVHlwZUNNRCwKICAgICAgICBkYXRhOiBieXRlcyA9IGIiIiwKICAgICAgICBvcGNvZGU9Tm9uZSwKICAgICk6CiAgICAgICAgc2VsZi5kYXRhID0gZGF0YQogICAgICAgIHNlbGYucGFja190eXBlXyA9IHBhY2tfdHlwZQogICAgICAgIHNlbGYub3Bjb2RlXyA9IG9wY29kZQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHBhcnNlKGNscywgZGF0YTogYnl0ZXMsIHRhcmdldF90eXBlOiBQYWNrVHlwZSA9IFBhY2tUeXBlLlBhY2tUeXBlQ01EKSAtPiAiUGFjayI6CiAgICAgICAgaWYgbm90IGNscy5jaGVja19oZWFkKGRhdGEpIG9yIG5vdCBjbHMuY2hlY2tfdGFpbChkYXRhKToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBjaGVja19oZWFkKGNscywgZGF0YSkgLT4gYm9vbDoKICAgICAgICBpZiBub3QgY2xzLmNoZWNrX21hZ2ljKGRhdGFbMCA6IGxlbihQYWNrQ29udGVudC5NYWdpYyldKToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgIHJldHVybiBUcnVlCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgY2hlY2tfdGFpbChjbHMsIGRhdGEpIC0+IGJvb2w6CiAgICAgICAgaWYgbm90IGNscy5jaGVja19tYWdpYyhkYXRhWy1sZW4oUGFja0NvbnRlbnQuTWFnaWMpIDpdKToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgIHJldHVybiBUcnVlCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgY2hlY2tfbWFnaWMoY2xzLCBkYXRhKSAtPiBib29sOgogICAgICAgIGlmIGxlbihkYXRhKSA8IGxlbihQYWNrQ29udGVudC5NYWdpYyk6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICBpZiBkYXRhICE9IFBhY2tDb250ZW50Lk1hZ2ljOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gVHJ1ZQoKCmNsYXNzIENtZFBhY2soUGFjayk6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwYWNrX3R5cGU9UGFja1R5cGUuUGFja1R5cGVDTUQsCiAgICAgICAgZGF0YT1iIiIsCiAgICAgICAgb3Bjb2RlPU5vbmUsCiAgICAgICAgcmVjb3JkX3R5cGU9Tm9uZSwKICAgICAgICByZWNvcmRfZGF0YT1Ob25lLAogICAgKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHBhY2tfdHlwZSwgZGF0YSwgb3Bjb2RlKQogICAgICAgIHNlbGYucmVjb3JkX3R5cGVfID0gcmVjb3JkX3R5cGUKICAgICAgICBzZWxmLnJlY29yZF9kYXRhXyA9IHJlY29yZF9kYXRhCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAicGFja190eXBlOiB7fSwgb3Bjb2RlOiB7fSwgcmVjb3JkX3R5cGU6IHt9LCByZWNvcmQgZGF0YToge30iLmZvcm1hdCgKICAgICAgICAgICAgc2VsZi5wYWNrX3R5cGVfLCBzZWxmLm9wY29kZV8sIHNlbGYucmVjb3JkX3R5cGVfLCBzZWxmLnJlY29yZF9kYXRhXwogICAgICAgICkKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBwYWNrKAogICAgICAgIGNscywKICAgICAgICBvcGNvZGU6IE9wY29kZSwKICAgICAgICByZWNvcmRfdHlwZTogUmVjb3JkVHlwZSwKICAgICAgICByZWNvcmQ9YiIiLAogICAgKToKICAgICAgICByZWNvcmRfY29udGVudF9sZW5ndGggPSBsZW4ocmVjb3JkKQoKICAgICAgICBwYWNrZXQgPSBiIiIKICAgICAgICBwYWNrZXQgKz0gUGFja0NvbnRlbnQuTWFnaWMKICAgICAgICBwYWNrZXQgKz0gc3RydWN0LnBhY2soIkIiLCBvcGNvZGUudmFsdWUpCiAgICAgICAgcGFja2V0ICs9IHN0cnVjdC5wYWNrKCJCIiwgcmVjb3JkX3R5cGUudmFsdWUpCiAgICAgICAgIyBwYWNrZXQgKz0gc3RydWN0LnBhY2soIjxRIiwgcmVjb3JkX2NvbnRlbnRfbGVuZ3RoKSAgIyA8USDooajnpLrlsI/nq6/ml6DnrKblj7c2NOS9jeaVtOaVsAogICAgICAgIHBhY2tldCArPSBzdHJ1Y3QucGFjaygiPkkiLCByZWNvcmRfY29udGVudF9sZW5ndGgpICAjID5JIOihqOekuuWkp+err+aXoOespuWPtzMy5L2N5pW05pWwCiAgICAgICAgcGFja2V0ICs9IHN0cnVjdC5wYWNrKCJCIiwgMCkKICAgICAgICBwYWNrZXQgKz0gc3RydWN0LnBhY2soIkIiLCAwKQogICAgICAgICMgcGFja2V0ICs9IHN0cnVjdC5wYWNrKCJCIiwgMCkKICAgICAgICAjIHBhY2tldCArPSBzdHJ1Y3QucGFjaygiQiIsIDApCiAgICAgICAgdG9xdWVfdmFsdWUgPSA4MAogICAgICAgIHBhY2tldCArPSBzdHJ1Y3QucGFjaygiPkgiLCB0b3F1ZV92YWx1ZSkgICMgYidceDAxXHhmNCcKICAgICAgICBwYWNrZXQgKz0gcmVjb3JkCiAgICAgICAgcGFja2V0ICs9IHN0cnVjdC5wYWNrKCJCIiwgMCkKICAgICAgICBwYWNrZXQgKz0gc3RydWN0LnBhY2soIkIiLCAxKQogICAgICAgIHBhY2tldCArPSBQYWNrQ29udGVudC5NYWdpYwoKICAgICAgICByZXR1cm4gQ21kUGFjaygKICAgICAgICAgICAgZGF0YT1wYWNrZXQsIG9wY29kZT1vcGNvZGUsIHJlY29yZF9kYXRhPXJlY29yZCwgcmVjb3JkX3R5cGU9cmVjb3JkX3R5cGUKICAgICAgICApCiAgICAKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHBhY2tfY2FsaWIoCiAgICAgICAgY2xzLAogICAgICAgIHJlY29yZD1iIiIsCiAgICApOgogICAgICAgIHJlY29yZF9jb250ZW50X2xlbmd0aCA9IGxlbihyZWNvcmQpCgogICAgICAgIHBhY2tldCA9IGIiIgogICAgICAgIHBhY2tldCArPSByZWNvcmQKCiAgICAgICAgcmV0dXJuIENtZFBhY2soCiAgICAgICAgICAgIGRhdGE9cGFja2V0LCBvcGNvZGU9Tm9uZSwgcmVjb3JkX2RhdGE9cmVjb3JkLCByZWNvcmRfdHlwZT1Ob25lCiAgICAgICAgKQogICAgCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiB1bnBhY2soY2xzLCBkYXRhOiBieXRlcykgLT4gIkNtZFBhY2siOgogICAgICAgIGlmIG5vdCBjbHMuY2hlY2tfaGVhZChkYXRhKSBvciBub3QgY2xzLmNoZWNrX3RhaWwoZGF0YSk6CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgICAgICMg6K6h566X5pWw5o2u5YyF5ZCE6YOo5YiG55qE5L2N572uCiAgICAgICAgbWFnaWNfbGVuID0gbGVuKFBhY2tDb250ZW50Lk1hZ2ljKQogICAgICAgIGhlYWRlcl9lbmQgPSBtYWdpY19sZW4KICAgICAgICBvcGNvZGVfcG9zID0gaGVhZGVyX2VuZAogICAgICAgIHJlY29yZF90eXBlX3BvcyA9IG9wY29kZV9wb3MgKyAxCiAgICAgICAgbGVuZ3RoX3BvcyA9IHJlY29yZF90eXBlX3BvcyArIDEKICAgICAgICByZWNvcmRfc3RhcnQgPSBsZW5ndGhfcG9zICsgOAogICAgICAgIHJlY29yZF9lbmQgPSAtbWFnaWNfbGVuCgogICAgICAgIG9wY29kZV92YWx1ZSA9IGRhdGFbb3Bjb2RlX3Bvc10KICAgICAgICByZWNvcmRfdHlwZV92YWx1ZSA9IGRhdGFbcmVjb3JkX3R5cGVfcG9zXQogICAgICAgIHJlY29yZF9jb250ZW50X2xlbmd0aCA9IHN0cnVjdC51bnBhY2soIjxRIiwgZGF0YVtsZW5ndGhfcG9zIDogbGVuZ3RoX3BvcyArIDhdKVsKICAgICAgICAgICAgMAogICAgICAgIF0KICAgICAgICByZWNvcmRfZGF0YSA9IGRhdGFbcmVjb3JkX3N0YXJ0OnJlY29yZF9lbmRdCgogICAgICAgIGlmIGxlbihyZWNvcmRfZGF0YSkgIT0gcmVjb3JkX2NvbnRlbnRfbGVuZ3RoOgogICAgICAgICAgICBwcmludCgiRVJST1IhIHJlY29yZCBkYXRhIGxlbmd0aCBub3QgbWF0Y2ghIikKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcGNvZGUgPSBPcGNvZGUob3Bjb2RlX3ZhbHVlKQogICAgICAgICAgICByZWNvcmRfdHlwZSA9IFJlY29yZFR5cGUocmVjb3JkX3R5cGVfdmFsdWUpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgcmV0dXJuIENtZFBhY2soCiAgICAgICAgICAgIGRhdGE9ZGF0YSwgb3Bjb2RlPW9wY29kZSwgcmVjb3JkX3R5cGU9cmVjb3JkX3R5cGUsIHJlY29yZF9kYXRhPXJlY29yZF9kYXRhCiAgICAgICAgKQoKCmNsYXNzIE1lc3NhZ2VQYWNrKFBhY2spOgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFja190eXBlPVBhY2tUeXBlLlBhY2tUeXBlTWVzc2FnZSwKICAgICAgICBkYXRhPWIiIiwKICAgICAgICBvcGNvZGU9Tm9uZSwKICAgICAgICByZWNvcmRzOiBMaXN0W1JlY29yZF0gPSBbXSwKICAgICk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhwYWNrX3R5cGUsIGRhdGEsIG9wY29kZSkKICAgICAgICBzZWxmLnJlY29yZHNfID0gcmVjb3JkcwoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gInBhY2tfdHlwZToge30sIG9wY29kZToge30sIHJlY29yZHM6IFxuIHt9Ii5mb3JtYXQoCiAgICAgICAgICAgIHNlbGYucGFja190eXBlXywgc2VsZi5vcGNvZGVfLCBzZWxmLnJlY29yZHNfCiAgICAgICAgKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHBhY2soCiAgICAgICAgY2xzLAogICAgICAgIG9wY29kZTogT3Bjb2RlLAogICAgICAgIHJlY29yZHM6IExpc3RbUmVjb3JkXSA9IFtdLAogICAgKToKCiAgICAgICAgcGFja2V0ID0gYiIiCiAgICAgICAgcGFja2V0ICs9IFBhY2tDb250ZW50Lk1hZ2ljCiAgICAgICAgcGFja2V0ICs9IHN0cnVjdC5wYWNrKCJCIiwgb3Bjb2RlLnZhbHVlKQoKICAgICAgICBmb3IgcmVjb3JkIGluIHJlY29yZHM6CiAgICAgICAgICAgIHBhY2tldCArPSBzdHJ1Y3QucGFjaygiQiIsIHJlY29yZC5yZWNvcmRfdHlwZS52YWx1ZSkKICAgICAgICAgICAgcGFja2V0ICs9IHN0cnVjdC5wYWNrKAogICAgICAgICAgICAgICAgIjxRIiwgcmVjb3JkLnJlY29yZF9jb250ZW50X2xlbmd0aAogICAgICAgICAgICApICAjIDxRIOihqOekuuWwj+err+aXoOespuWPtzY05L2N5pW05pWwCiAgICAgICAgICAgIHBhY2tldCArPSByZWNvcmQucmVjb3JkX2RhdGEKCiAgICAgICAgcGFja2V0ICs9IFBhY2tDb250ZW50Lk1hZ2ljCiAgICAgICAgcmV0dXJuIHBhY2tldAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIHVucGFjayhjbHMsIGRhdGE6IGJ5dGVzKSAtPiAiTWVzc2FnZVBhY2siOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBwcmludCgidW5wYWNrIGRhdGE6IHt9Ii5mb3JtYXQoZGF0YS5oZXgoKSkpCiAgICAgICAgICAgIGlmIG5vdCBjbHMuY2hlY2tfaGVhZChkYXRhKSBvciBub3QgY2xzLmNoZWNrX3RhaWwoZGF0YSk6CiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgcmVjb3JkczogTGlzdFtSZWNvcmRdID0gW10KCiAgICAgICAgICAgIG1hZ2ljX2xlbiA9IGxlbihQYWNrQ29udGVudC5NYWdpYykKICAgICAgICAgICAgaGVhZGVyX2VuZCA9IG1hZ2ljX2xlbgogICAgICAgICAgICBvcGNvZGVfcG9zID0gaGVhZGVyX2VuZAoKICAgICAgICAgICAgaSA9IG9wY29kZV9wb3MgKyAxCiAgICAgICAgICAgIG9wY29kZV92YWx1ZSA9IGRhdGFbb3Bjb2RlX3Bvc10KCiAgICAgICAgICAgIGRhdGFfZW5kID0gbGVuKGRhdGEpIC0gbWFnaWNfbGVuCiAgICAgICAgICAgIHdoaWxlIGkgPCBkYXRhX2VuZDoKICAgICAgICAgICAgICAgIHJlY29yZF90eXBlX3BvcyA9IGkKICAgICAgICAgICAgICAgIHJlY29yZF90eXBlX3ZhbHVlID0gZGF0YVtyZWNvcmRfdHlwZV9wb3NdCiAgICAgICAgICAgICAgICBsZW5ndGhfcG9zID0gcmVjb3JkX3R5cGVfcG9zICsgMQogICAgICAgICAgICAgICAgcmVjb3JkX2NvbnRlbnRfbGVuZ3RoID0gc3RydWN0LnVucGFjaygKICAgICAgICAgICAgICAgICAgICAiPlEiLCBkYXRhW2xlbmd0aF9wb3MgOiBsZW5ndGhfcG9zICsgOF0KICAgICAgICAgICAgICAgIClbMF0KCiAgICAgICAgICAgICAgICByZWNvcmRfc3RhcnQgPSBsZW5ndGhfcG9zICsgOAogICAgICAgICAgICAgICAgcmVjb3JkX2VuZCA9IHJlY29yZF9zdGFydCArIHJlY29yZF9jb250ZW50X2xlbmd0aAogICAgICAgICAgICAgICAgcmVjb3JkX2RhdGEgPSBkYXRhW3JlY29yZF9zdGFydDpyZWNvcmRfZW5kXQoKICAgICAgICAgICAgICAgIHJlY29yZHMuYXBwZW5kKFJlY29yZChSZWNvcmRUeXBlKHJlY29yZF90eXBlX3ZhbHVlKSwgcmVjb3JkX2RhdGEpKQoKICAgICAgICAgICAgICAgIGkgPSByZWNvcmRfZW5kCgogICAgICAgICAgICByZXR1cm4gTWVzc2FnZVBhY2soZGF0YT1kYXRhLCBvcGNvZGU9T3Bjb2RlKG9wY29kZV92YWx1ZSksIHJlY29yZHM9cmVjb3JkcykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uICBhcyBlOgogICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiB1bnBhY2tfY2FtZXJhX2NhbGliKGNscywgZGF0YTogYnl0ZXMpIC0+IGJvb2w6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBwcmludCgidW5wYWNrIGRhdGE6IHt9Ii5mb3JtYXQoZGF0YS5oZXgoKSkpCiAgICAgICAgICAgIGlmIG5vdCBjbHMuY2hlY2tfaGVhZChkYXRhKSBvciBub3QgY2xzLmNoZWNrX3RhaWwoZGF0YSk6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIG1hZ2ljX2xlbiA9IGxlbihQYWNrQ29udGVudC5NYWdpYykKICAgICAgICAgICAgICAgICAgICAgICMgVGhlIHN0cnVjdHVyZSBzZWVtcyB0byBiZToKICAgICAgICAgICAgIyBbTWFnaWMgKDUpXSArIFtMZW5ndGggKDIsIEJpZyBFbmRpYW4pXSArIFtPcGNvZGUgKDEpXSArIFtQYXlsb2FkXSArIFtUYWlsIE1hZ2ljICg1KV0KICAgICAgICAgICAgIyBCYXNlZCBvbiB1c2VyIGlucHV0OiAnZGFzXHJcbicgKDUpICsgJ1x4MDFceDkxJyAoMikgKyAnXG4nICgxLCBPcGNvZGUgMHgwQSkgKyAuLi4KCiAgICAgICAgICAgIGxlbmd0aF9wb3MgPSBtYWdpY19sZW4KICAgICAgICAgICAgIyBSZWFkIDIgYnl0ZXMgbGVuZ3RoIChCaWcgRW5kaWFuIGJhc2VkIG9uIDB4MDE5MSA9IDQwMSkKICAgICAgICAgICAgcGF5bG9hZF9sZW5ndGggPSBzdHJ1Y3QudW5wYWNrKCI+SCIsIGRhdGFbbGVuZ3RoX3BvcyA6IGxlbmd0aF9wb3MgKyAyXSlbMF0KCiAgICAgICAgICAgIG9wY29kZV9wb3MgPSBsZW5ndGhfcG9zICsgMgogICAgICAgICAgICBvcGNvZGVfdmFsdWUgPSBkYXRhW29wY29kZV9wb3NdCgogICAgICAgICAgICAjIFBheWxvYWQgc3RhcnRzIGFmdGVyIE9wY29kZQogICAgICAgICAgICBwYXlsb2FkX3N0YXJ0ID0gb3Bjb2RlX3BvcyArIDEKICAgICAgICAgICAgIyBQYXlsb2FkIGVuZHMgYmVmb3JlIFRhaWwgTWFnaWMKICAgICAgICAgICAgIyBPciB3ZSBjYW4gdXNlIHRoZSBwYXJzZWQgbGVuZ3RoIHRvIGRldGVybWluZSBlbmQ/CiAgICAgICAgICAgICMgTGV0J3Mgc3RpY2sgdG8gdGhlIHN0cnVjdHVyZTogTWFnaWMgKyBMZW5ndGggKyBPcGNvZGUgKyBQYXlsb2FkICsgTWFnaWMKICAgICAgICAgICAgIyBUb3RhbCBsZW5ndGggY2hlY2s/CgogICAgICAgICAgICBwYXlsb2FkID0gZGF0YVtwYXlsb2FkX3N0YXJ0IDogLW1hZ2ljX2xlbl0KCiAgICAgICAgICAgICMgUGFyc2UgdGhlIHByb3RvYnVmLWxpa2UgcGF5bG9hZAogICAgICAgICAgICBjYWxpYl9pbmZvID0gY2xzLl9wYXJzZV9wcm90b2J1Zl9jYWxpYihwYXlsb2FkKQoKICAgICAgICAgICAgIyDmo4Dmn6XmmK/lkKbpnIDopoHnlJ/miJBZQU1M5paH5Lu2CiAgICAgICAgICAgIHlhbWxfZmlsZW5hbWUgPSBvcy5lbnZpcm9uLmdldCgiQ0FMSUJfWUFNTF9GSUxFTkFNRSIpCiAgICAgICAgICAgIGlmIHlhbWxfZmlsZW5hbWU6CiAgICAgICAgICAgICAgICAjIOaciVlBTUzmlofku7blkI3vvIznlJ/miJBZQU1M5paH5Lu2CiAgICAgICAgICAgICAgICB5YW1sX2NvbnRlbnQgPSBjbHMuX2dlbmVyYXRlX3lhbWwoY2FsaWJfaW5mbykKICAgICAgICAgICAgICAgIHByaW50KCLnlJ/miJBZQU1M5YaF5a65OiAiLCB5YW1sX2NvbnRlbnQpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgc2NyaXB0X2RpciA9IG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmFic3BhdGgoX19maWxlX18pKQogICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZV9kaXIgPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5qb2luKHNjcmlwdF9kaXIsICIuLi8uLi8uLi8iKSkKICAgICAgICAgICAgICAgICAgICByZXN1bHRfZGlyID0gb3MucGF0aC5qb2luKHdvcmtzcGFjZV9kaXIsICJjYWxpYl9yZXN1bHQiKQoKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMocmVzdWx0X2Rpcik6CiAgICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKHJlc3VsdF9kaXIpCgogICAgICAgICAgICAgICAgICAgIGZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihyZXN1bHRfZGlyLCB5YW1sX2ZpbGVuYW1lKQogICAgICAgICAgICAgICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICJ3IikgYXMgZjoKICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh5YW1sX2NvbnRlbnQpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLinIUg55u45py65qCH5a6a5paH5Lu25bey5L+d5a2YOiB7ZmlsZV9wYXRofSIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBwcmludChmIuS/neWtmOagh+WumuaWh+S7tumUmeivrzoge2V9IikKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMg5rKh5pyJWUFNTOaWh+S7tuWQje+8jOS4jeeUn+aIkOaWh+S7tgogICAgICAgICAgICAgICAgcHJpbnQoIuKchSDmoIflrprmlbDmja7op6PmnpDmiJDlip8gKOS4jeeUn+aIkFlBTUzmlofku7YpIikKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfcmVhZF92YXJpbnQoZGF0YSwgcG9zKToKICAgICAgICByZXN1bHQgPSAwCiAgICAgICAgc2hpZnQgPSAwCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgaWYgcG9zID49IGxlbihkYXRhKToKICAgICAgICAgICAgICAgIHByaW50KGYicG9zOiB7cG9zfSwgZGF0YToge2RhdGF9LCBsZW46IHtsZW4oZGF0YSl9IikKICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiVmFyaW50IG92ZXJmbG93IikKICAgICAgICAgICAgYiA9IGRhdGFbcG9zXQogICAgICAgICAgICBwb3MgKz0gMQogICAgICAgICAgICByZXN1bHQgfD0gKGIgJiAweDdmKSA8PCBzaGlmdAogICAgICAgICAgICBpZiBub3QgKGIgJiAweDgwKToKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQsIHBvcwogICAgICAgICAgICBzaGlmdCArPSA3CgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX3BhcnNlX3Byb3RvYnVmX2NhbGliKGNscywgZGF0YSk6CiAgICAgICAgcG9zID0gMAogICAgICAgIGluZm8gPSB7CiAgICAgICAgICAgICJ3aWR0aCI6IDAsCiAgICAgICAgICAgICJoZWlnaHQiOiAwLAogICAgICAgICAgICAibW9kZWwiOiAiIiwKICAgICAgICAgICAgImRpc3RvcnRpb24iOiBbXSwKICAgICAgICAgICAgImludHJpbnNpY3MiOiBbXSwKICAgICAgICAgICAgImV4dHJpbnNpY3MiOiBbXSwgICMgdHgsIHR5LCB0eiwgcXgsIHF5LCBxeiwgcXcKICAgICAgICB9CgogICAgICAgIHRyeToKICAgICAgICAgICAgd2hpbGUgcG9zIDwgbGVuKGRhdGEpOgogICAgICAgICAgICAgICAgdGFnLCBwb3MgPSBjbHMuX3JlYWRfdmFyaW50KGRhdGEsIHBvcykKICAgICAgICAgICAgICAgIGZpZWxkX251bSA9IHRhZyA+PiAzCiAgICAgICAgICAgICAgICB3aXJlX3R5cGUgPSB0YWcgJiAweDA3CgogICAgICAgICAgICAgICAgaWYgZmllbGRfbnVtID09IDIgYW5kIHdpcmVfdHlwZSA9PSA1OiAgIyBXaWR0aCAoRml4ZWQzMikKICAgICAgICAgICAgICAgICAgICBpbmZvWyJ3aWR0aCJdID0gc3RydWN0LnVucGFjaygiPEkiLCBkYXRhW3BvcyA6IHBvcyArIDRdKVswXQogICAgICAgICAgICAgICAgICAgIHByaW50KCJpbmZvIHdpZHRoOiAiLCBpbmZvWyJ3aWR0aCJdKQogICAgICAgICAgICAgICAgICAgIHBvcyArPSA0CiAgICAgICAgICAgICAgICBlbGlmIGZpZWxkX251bSA9PSAzIGFuZCB3aXJlX3R5cGUgPT0gNTogICMgSGVpZ2h0IChGaXhlZDMyKQogICAgICAgICAgICAgICAgICAgIGluZm9bImhlaWdodCJdID0gc3RydWN0LnVucGFjaygiPEkiLCBkYXRhW3BvcyA6IHBvcyArIDRdKVswXQogICAgICAgICAgICAgICAgICAgIHByaW50KCJpbmZvIGhlaWdodDogIiwgaW5mb1siaGVpZ2h0Il0pCiAgICAgICAgICAgICAgICAgICAgcG9zICs9IDQKICAgICAgICAgICAgICAgIGVsaWYgZmllbGRfbnVtID09IDQgYW5kIHdpcmVfdHlwZSA9PSAyOiAgIyBNb2RlbCAoU3RyaW5nKQogICAgICAgICAgICAgICAgICAgIGxlbmd0aCwgcG9zID0gY2xzLl9yZWFkX3ZhcmludChkYXRhLCBwb3MpCiAgICAgICAgICAgICAgICAgICAgaW5mb1sibW9kZWwiXSA9IGRhdGFbcG9zIDogcG9zICsgbGVuZ3RoXS5kZWNvZGUoInV0Zi04IikKICAgICAgICAgICAgICAgICAgICBwcmludCgiaW5mbyBtb2RlbDogIiwgaW5mb1sibW9kZWwiXSkKICAgICAgICAgICAgICAgICAgICBwb3MgKz0gbGVuZ3RoCiAgICAgICAgICAgICAgICBlbGlmIGZpZWxkX251bSA9PSA1IGFuZCB3aXJlX3R5cGUgPT0gMjogICMgRGlzdG9ydGlvbiBDb2VmZnMgKFBhY2tlZCBEb3VibGVzKQogICAgICAgICAgICAgICAgICAgIGxlbmd0aCwgcG9zID0gY2xzLl9yZWFkX3ZhcmludChkYXRhLCBwb3MpCiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBsZW5ndGggLy8gOAogICAgICAgICAgICAgICAgICAgIGluZm9bImRpc3RvcnRpb24iXSA9IGxpc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdC51bnBhY2soZiI8e2NvdW50fWQiLCBkYXRhW3BvcyA6IHBvcyArIGxlbmd0aF0pCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHByaW50KCJpbmZvIGRpc3RvcnRpb246ICIsIGluZm9bImRpc3RvcnRpb24iXSkKICAgICAgICAgICAgICAgICAgICBwb3MgKz0gbGVuZ3RoCiAgICAgICAgICAgICAgICBlbGlmIGZpZWxkX251bSA9PSA2IGFuZCB3aXJlX3R5cGUgPT0gMjogICMgSW50cmluc2ljcyBNYXRyaXggKFBhY2tlZCBEb3VibGVzKQogICAgICAgICAgICAgICAgICAgIGxlbmd0aCwgcG9zID0gY2xzLl9yZWFkX3ZhcmludChkYXRhLCBwb3MpCiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBsZW5ndGggLy8gOAogICAgICAgICAgICAgICAgICAgIGluZm9bImludHJpbnNpY3MiXSA9IGxpc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdC51bnBhY2soZiI8e2NvdW50fWQiLCBkYXRhW3BvcyA6IHBvcyArIGxlbmd0aF0pCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHByaW50KCJpbmZvIGludHJpbnNpY3M6ICIsIGluZm9bImludHJpbnNpY3MiXSkKICAgICAgICAgICAgICAgICAgICBwb3MgKz0gbGVuZ3RoCiAgICAgICAgICAgICAgICBlbGlmIGZpZWxkX251bSA9PSAxMCBhbmQgd2lyZV90eXBlID09IDI6ICAjIEV4dHJpbnNpY3MgKFBhY2tlZCBEb3VibGVzKQogICAgICAgICAgICAgICAgICAgIGxlbmd0aCwgcG9zID0gY2xzLl9yZWFkX3ZhcmludChkYXRhLCBwb3MpCiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBsZW5ndGggLy8gOAogICAgICAgICAgICAgICAgICAgIGluZm9bImV4dHJpbnNpY3MiXSA9IGxpc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdC51bnBhY2soZiI8e2NvdW50fWQiLCBkYXRhW3BvcyA6IHBvcyArIGxlbmd0aF0pCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHByaW50KCJpbmZvIGV4dHJpbnNpY3M6ICIsIGluZm9bImV4dHJpbnNpY3MiXSkKICAgICAgICAgICAgICAgICAgICBwb3MgKz0gbGVuZ3RoCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgU2tpcCB1bmtub3duIGZpZWxkcwogICAgICAgICAgICAgICAgICAgIGlmIHdpcmVfdHlwZSA9PSAwOiAgIyBWYXJpbnQKICAgICAgICAgICAgICAgICAgICAgICAgXywgcG9zID0gY2xzLl9yZWFkX3ZhcmludChkYXRhLCBwb3MpCiAgICAgICAgICAgICAgICAgICAgZWxpZiB3aXJlX3R5cGUgPT0gMTogICMgRml4ZWQ2NAogICAgICAgICAgICAgICAgICAgICAgICBwb3MgKz0gOAogICAgICAgICAgICAgICAgICAgIGVsaWYgd2lyZV90eXBlID09IDI6ICAjIExlbmd0aCBEZWxpbWl0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoLCBwb3MgPSBjbHMuX3JlYWRfdmFyaW50KGRhdGEsIHBvcykKICAgICAgICAgICAgICAgICAgICAgICAgcG9zICs9IGxlbmd0aAogICAgICAgICAgICAgICAgICAgIGVsaWYgd2lyZV90eXBlID09IDM6ICAjIFN0YXJ0IEdyb3VwIChEZXByZWNhdGVkKQogICAgICAgICAgICAgICAgICAgICAgICAjIEp1c3Qgc2tpcCB0aGUgdGFnLCBob3BlIHdlIGNhbiBwYXJzZSBpbm5lciBmaWVsZHMgb3IgZmluZCBFbmQgR3JvdXAKICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgICAgIGVsaWYgd2lyZV90eXBlID09IDQ6ICAjIEVuZCBHcm91cCAoRGVwcmVjYXRlZCkKICAgICAgICAgICAgICAgICAgICAgICAgIyBKdXN0IHNraXAgdGhlIHRhZwogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICAgICAgZWxpZiB3aXJlX3R5cGUgPT0gNTogICMgRml4ZWQzMgogICAgICAgICAgICAgICAgICAgICAgICBwb3MgKz0gNAogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMgVW5rbm93biB3aXJlIHR5cGUsIGFib3J0IG9yIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiVW5rbm93biB3aXJlIHR5cGUge3dpcmVfdHlwZX0gYXQgcG9zIHtwb3N9IikKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYi6Kej5p6QcHJvdG9idWbmlbDmja7plJnor686IHtlfSIpICAgICAgICAgICAgICAgIAogICAgICAgIHJldHVybiBpbmZvCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIF9nZW5lcmF0ZV95YW1sKGluZm8pOgogICAgICAgICMgTWFwIG1vZGVsIG5hbWUKICAgICAgICBtb2RlbCA9ICJrYjQiIGlmIGluZm9bIm1vZGVsIl0gPT0gImVxdWlkaXN0YW50IiBlbHNlIGluZm9bIm1vZGVsIl0KCiAgICAgICAgIyBFeHRyYWN0IGludHJpbnNpY3M6IFtmeCwgMCwgY3gsIDAsIGZ5LCBjeSwgMCwgMCwgMV0gLT4gW2Z4LCBmeSwgY3gsIGN5XQogICAgICAgIEsgPSBpbmZvWyJpbnRyaW5zaWNzIl0KICAgICAgICBpbnRyaW5zaWNzID0gW0tbMF0sIEtbNF0sIEtbMl0sIEtbNV1dIGlmIGxlbihLKSA+PSA2IGVsc2UgW10KCiAgICAgICAgIyBDYWxjdWxhdGUgRXh0cmluc2ljcyBNYXRyaXggVF9CUwogICAgICAgICMgRGF0YTogdHgsIHR5LCB0eiwgcXgsIHF5LCBxeiwgcXcKICAgICAgICBFID0gaW5mb1siZXh0cmluc2ljcyJdCiAgICAgICAgaWYgbGVuKEUpID49IDc6CiAgICAgICAgICAgIHR4LCB0eSwgdHogPSBFWzBdLCBFWzFdLCBFWzJdCiAgICAgICAgICAgIHF4LCBxeSwgcXosIHF3ID0gRVszXSwgRVs0XSwgRVs1XSwgRVs2XQoKICAgICAgICAgICAgIyBRdWF0ZXJuaW9uIHRvIFJvdGF0aW9uIE1hdHJpeAogICAgICAgICAgICAjIFIgPSBbIDEtMnleMi0yel4yLCAyeHktMnp3LCAgICAgMnh6KzJ5dyBdCiAgICAgICAgICAgICMgICAgIFsgMnh5KzJ6dywgICAgIDEtMnheMi0yel4yLCAyeXotMnh3IF0KICAgICAgICAgICAgIyAgICAgWyAyeHotMnl3LCAgICAgMnl6KzJ4dywgICAgIDEtMnheMi0yeV4yIF0KCiAgICAgICAgICAgIHh4LCB5eSwgenogPSBxeCAqIHF4LCBxeSAqIHF5LCBxeiAqIHF6CiAgICAgICAgICAgIHh5LCB4eiwgeXogPSBxeCAqIHF5LCBxeCAqIHF6LCBxeSAqIHF6CiAgICAgICAgICAgIHd4LCB3eSwgd3ogPSBxdyAqIHF4LCBxdyAqIHF5LCBxdyAqIHF6CgogICAgICAgICAgICByMDAgPSAxIC0gMiAqICh5eSArIHp6KQogICAgICAgICAgICByMDEgPSAyICogKHh5IC0gd3opCiAgICAgICAgICAgIHIwMiA9IDIgKiAoeHogKyB3eSkKCiAgICAgICAgICAgIHIxMCA9IDIgKiAoeHkgKyB3eikKICAgICAgICAgICAgcjExID0gMSAtIDIgKiAoeHggKyB6eikKICAgICAgICAgICAgcjEyID0gMiAqICh5eiAtIHd4KQoKICAgICAgICAgICAgcjIwID0gMiAqICh4eiAtIHd5KQogICAgICAgICAgICByMjEgPSAyICogKHl6ICsgd3gpCiAgICAgICAgICAgIHIyMiA9IDEgLSAyICogKHh4ICsgeXkpCgogICAgICAgICAgICB0X2JzX2RhdGEgPSBbCiAgICAgICAgICAgICAgICByMDAsCiAgICAgICAgICAgICAgICByMDEsCiAgICAgICAgICAgICAgICByMDIsCiAgICAgICAgICAgICAgICB0eCwKICAgICAgICAgICAgICAgIHIxMCwKICAgICAgICAgICAgICAgIHIxMSwKICAgICAgICAgICAgICAgIHIxMiwKICAgICAgICAgICAgICAgIHR5LAogICAgICAgICAgICAgICAgcjIwLAogICAgICAgICAgICAgICAgcjIxLAogICAgICAgICAgICAgICAgcjIyLAogICAgICAgICAgICAgICAgdHosCiAgICAgICAgICAgICAgICAwLjAsCiAgICAgICAgICAgICAgICAwLjAsCiAgICAgICAgICAgICAgICAwLjAsCiAgICAgICAgICAgICAgICAxLjAsCiAgICAgICAgICAgIF0KICAgICAgICBlbHNlOgogICAgICAgICAgICB0X2JzX2RhdGEgPSBbMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMV0KCiAgICAgICAgIyBGb3JtYXQgWUFNTCBzdHJpbmcKICAgICAgICB5YW1sX3N0ciA9ICIjIEdlbmVyYWwgc2Vuc29yIGRlZmluaXRpb25zLlxuIgogICAgICAgIHlhbWxfc3RyICs9ICJzZW5zb3JfdHlwZTogY2FtZXJhXG4iCiAgICAgICAgeWFtbF9zdHIgKz0gImNvbW1lbnQ6IERBUyBDYW1lcmEgY2FtMFxuXG4iCgogICAgICAgIHlhbWxfc3RyICs9ICIjIFNlbnNvciBleHRyaW5zaWNzIHdydC4gdGhlIGJvZHktZnJhbWUuXG4iCiAgICAgICAgeWFtbF9zdHIgKz0gIlRfQlM6XG4iCiAgICAgICAgeWFtbF9zdHIgKz0gIiAgY29sczogNFxuIgogICAgICAgIHlhbWxfc3RyICs9ICIgIHJvd3M6IDRcbiIKICAgICAgICB5YW1sX3N0ciArPSAiICBkYXRhOiBbIgogICAgICAgIHlhbWxfc3RyICs9ICIsICIuam9pbihmInt4Omd9IiBmb3IgeCBpbiB0X2JzX2RhdGEpCiAgICAgICAgeWFtbF9zdHIgKz0gIl1cblxuIgoKICAgICAgICB5YW1sX3N0ciArPSAiIyBDYW1lcmEgc3BlY2lmaWMgZGVmaW5pdGlvbnMuXG4iCiAgICAgICAgeWFtbF9zdHIgKz0gInJhdGVfaHo6IDMwXG4iCiAgICAgICAgeWFtbF9zdHIgKz0gZiJyZXNvbHV0aW9uOiBbe2luZm9bJ3dpZHRoJ119LCB7aW5mb1snaGVpZ2h0J119XVxuIgogICAgICAgIHlhbWxfc3RyICs9IGYiY2FtZXJhX21vZGVsOiB7bW9kZWx9XG4iCiAgICAgICAgeWFtbF9zdHIgKz0gKAogICAgICAgICAgICAiaW50cmluc2ljczogWyIKICAgICAgICAgICAgKyAiLCAiLmpvaW4oZiJ7eH0iIGZvciB4IGluIGludHJpbnNpY3MpCiAgICAgICAgICAgICsgIl0gI2Z1LCBmdiwgY3UsIGN2XG4iCiAgICAgICAgKQogICAgICAgIHlhbWxfc3RyICs9IGYiZGlzdG9ydGlvbl9tb2RlbDoge21vZGVsfVxuIgogICAgICAgIHlhbWxfc3RyICs9ICgKICAgICAgICAgICAgImRpc3RvcnRpb25fY29lZmZpY2llbnRzOiBbIgogICAgICAgICAgICArICIsICIuam9pbihmInt4fSIgZm9yIHggaW4gaW5mb1siZGlzdG9ydGlvbiJdKQogICAgICAgICAgICArICJdICNrMSwgazIsIGszLCBrNFxuIgogICAgICAgICkKCiAgICAgICAgcmV0dXJuIHlhbWxfc3RyCiAgICAKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBjbWRfbCA9IENtZFBhY2sucGFja19jYWxpYihyZWNvcmQ9YiJjYW1lcmFybCIpICAjIHJlYWQgY2FtZXJhIGxlZnQgCgogICAgY21kX2MgPSBDbWRQYWNrLnBhY2tfY2FsaWIocmVjb3JkPWIiY2FtZXJhcmMiKQoKICAgIGNtZF9yID0gQ21kUGFjay5wYWNrX2NhbGliKHJlY29yZD1iImNhbWVyYXJyIikKCiAgICAjIGxfY21kX3BhY2sgPSBDbWRQYWNrLnVucGFjayhkYXRhPWNtZF9sLmRhdGEpCiAgICAjIGNfY21kX3BhY2sgPSBDbWRQYWNrLnVucGFjayhkYXRhPWNtZF9sLmRhdGEpCiAgICAjIHJfY21kX3BhY2sgPSBDbWRQYWNrLnVucGFjayhkYXRhPWNtZF9sLmRhdGEpCgogICAgIyBwcmludChsX2NtZF9wYWNrKQogICAgIyBwcmludChjX2NtZF9wYWNrKQogICAgIyBwcmludChyX2NtZF9wYWNrKQoKICAgIG1zZ19wYWNrX2RhdGEgPSBNZXNzYWdlUGFjay5wYWNrKAogICAgICAgIG9wY29kZT1PcGNvZGUuUmVhZEJhdGNoLAogICAgICAgIHJlY29yZHM9WwogICAgICAgICAgICBSZWNvcmQocmVjb3JkX3R5cGU9UmVjb3JkVHlwZS5UYWN0aWxlLCByZWNvcmRfZGF0YT1iInRhY3RpbGUiKSwKICAgICAgICAgICAgUmVjb3JkKHJlY29yZF90eXBlPVJlY29yZFR5cGUuRW5jb2RlciwgcmVjb3JkX2RhdGE9YiJlbmNvZGVyIiksCiAgICAgICAgXSwKICAgICkKCiAgICBtc2dfcGFjayA9IE1lc3NhZ2VQYWNrLnVucGFjayhtc2dfcGFja19kYXRhKQogICAgcHJpbnQobXNnX3BhY2sp
'''

# 解码并执行
try:
  source_code = base64.b64decode(ENCODED_SOURCE).decode('utf-8')
  code = compile(source_code, 'pack.py', 'exec')
  
  import builtins
  globals_dict = {
    '__name__': '__main__',
    '__file__': __file__,
    '__package__': None,
    '__builtins__': builtins,
  }
  
  exec(code, globals_dict)
  
  # 导出非私有符号
  for key, value in globals_dict.items():
    if not key.startswith('_'):
      globals()[key] = value
except Exception as e:
  print(f"pack模块解码错误: {e}")
  raise

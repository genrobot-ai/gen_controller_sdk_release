#!/usr/bin/env python3
# 混淆的相机节点
import sys
import os

# 设置路径
_script_dir = os.path.dirname(os.path.abspath(__file__))
if _script_dir not in sys.path:
  sys.path.insert(0, _script_dir)

# 原始代码（Base64编码）
import base64
import marshal
import types

# 编码的源码
ENCODED_SOURCE = '''
IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIOWcqOaWh+S7tuW8gOWktOa3u+WKoOi3r+W+hOWkhOeQhgppbXBvcnQgc3lzCmltcG9ydCBvcwoKIyDoh6rliqjmt7vliqDohJrmnKznm67lvZXliLBQeXRob27ot6/lvoQKc2NyaXB0X2RpciA9IG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmFic3BhdGgoX19maWxlX18pKQppZiBzY3JpcHRfZGlyIG5vdCBpbiBzeXMucGF0aDoKICAgIHN5cy5wYXRoLmluc2VydCgwLCBzY3JpcHRfZGlyKQoKaW1wb3J0IGN2MgppbXBvcnQgb3MKaW1wb3J0IHRpbWUKaW1wb3J0IGdsb2IKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHNpZ25hbAppbXBvcnQgc3lzCmltcG9ydCByb3NweQppbXBvcnQgbnVtcHkgYXMgbnAgICMg5re75YqgIG51bXB5IOWvvOWFpQpmcm9tIHNlbnNvcl9tc2dzLm1zZyBpbXBvcnQgSW1hZ2UsIENvbXByZXNzZWRJbWFnZQpmcm9tIGN2X2JyaWRnZSBpbXBvcnQgQ3ZCcmlkZ2UKaW1wb3J0IHRocmVhZGluZwpmcm9tIHN0ZF9tc2dzLm1zZyBpbXBvcnQgSGVhZGVyCgpjbGFzcyBDYW1lcmFDYXB0dXJlUk9TOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgICMg5YWI5Yid5aeL5YyWUk9T6IqC54K5CiAgICAgICAgdHJ5OgogICAgICAgICAgICByb3NweS5pbml0X25vZGUoJ2NhbWVyYV9jYXB0dXJlX25vZGUnLCBhbm9ueW1vdXM9VHJ1ZSkKICAgICAgICBleGNlcHQgcm9zcHkuZXhjZXB0aW9ucy5ST1NFeGNlcHRpb246CiAgICAgICAgICAgICMg5aaC5p6c5bey57uP5Yid5aeL5YyW77yM5Y+q6I635Y+W6IqC54K55ZCNCiAgICAgICAgICAgIHBhc3MKICAgICAgICAKICAgICAgICAjIOeEtuWQjuS7jlJPU+WPguaVsOiOt+WPlumFjee9rgogICAgICAgIHNlbGYuX2xvYWRfcm9zX3BhcmFtcygpCiAgICAgICAgCiAgICAgICAgIyDkvb/nlKjoioLngrnlkI3kvZzkuLrllK/kuIDmoIfor4YKICAgICAgICBzZWxmLm5vZGVfbmFtZSA9IHJvc3B5LmdldF9uYW1lKCkucmVwbGFjZSgnLycsICdfJykKICAgICAgICBpZiBzZWxmLm5vZGVfbmFtZSA9PSAnX3VubmFtZWQnOgogICAgICAgICAgICBzZWxmLm5vZGVfbmFtZSA9ICdjYW1lcmFfZGVmYXVsdCcKICAgICAgICAKICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiLoioLngrnmoIfor4Y6IHtzZWxmLm5vZGVfbmFtZX0iKQogICAgICAgIAogICAgICAgIHNlbGYuY2FtZXJhcyA9IFtdCiAgICAgICAgc2VsZi5ydW5uaW5nID0gVHJ1ZQogICAgICAgIAogICAgICAgICMg5pqC5pe25LiN5L2/55SoIEN2QnJpZGdl77yM6YG/5YWNIGxpYmZmaSDpl67popgKICAgICAgICAjIHNlbGYuYnJpZGdlID0gQ3ZCcmlkZ2UoKQogICAgICAgIAogICAgICAgIHNlbGYuaW1hZ2VfcHVibGlzaGVycyA9IFtdCiAgICAgICAgCiAgICAgICAgc2lnbmFsLnNpZ25hbChzaWduYWwuU0lHSU5ULCBzZWxmLl9zaWduYWxfaGFuZGxlcikKICAgICAgICBzaWduYWwuc2lnbmFsKHNpZ25hbC5TSUdURVJNLCBzZWxmLl9zaWduYWxfaGFuZGxlcikKICAgICAgICAKICAgICAgICBzZWxmLl9pbml0X2NhbWVyYXMoKQogICAgICAgIHNlbGYuX2luaXRfcm9zX3B1Ymxpc2hlcnMoKQoKICAgIGRlZiBfbG9hZF9yb3NfcGFyYW1zKHNlbGYpOgogICAgICAgICIiIuS7jlJPU+WPguaVsOacjeWKoeWZqOWKoOi9vemFjee9riIiIgogICAgICAgICMg6buY6K6k5Y+C5pWwCiAgICAgICAgc2VsZi5zaG93X3ByZXZpZXcgPSByb3NweS5nZXRfcGFyYW0oJ35zaG93X3ByZXZpZXcnLCBUcnVlKQogICAgICAgIAogICAgICAgICMg6Kej5p6Q5YiG6L6o546H5Y+C5pWwCiAgICAgICAgcmVzb2x1dGlvbnNfc3RyID0gcm9zcHkuZ2V0X3BhcmFtKCd+cmVzb2x1dGlvbnMnLCAiNjQweDQ4MCwzMjB4MjQwLDgwMHg2MDAiKQogICAgICAgIHNlbGYucmVzb2x1dGlvbnMgPSBbXQogICAgICAgIGZvciByZXNfc3RyIGluIHJlc29sdXRpb25zX3N0ci5zcGxpdCgnLCcpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB3aWR0aCwgaGVpZ2h0ID0gbWFwKGludCwgcmVzX3N0ci5zdHJpcCgpLnNwbGl0KCd4JykpCiAgICAgICAgICAgICAgICBzZWxmLnJlc29sdXRpb25zLmFwcGVuZCgod2lkdGgsIGhlaWdodCkpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJvc3B5LmxvZ3dhcm4oZiLml6Dms5Xop6PmnpDliIbovqjnjoflrZfnrKbkuLI6IHtyZXNfc3RyfSIpCiAgICAgICAgCiAgICAgICAgIyDlpoLmnpzmsqHmnInop6PmnpDliLDmnInmlYjnmoTliIbovqjnjofvvIzkvb/nlKjpu5jorqTlgLwKICAgICAgICBpZiBub3Qgc2VsZi5yZXNvbHV0aW9uczoKICAgICAgICAgICAgc2VsZi5yZXNvbHV0aW9ucyA9IFsoNjQwLCA0ODApLCAoMzIwLCAyNDApLCAoODAwLCA2MDApXQogICAgICAgIAogICAgICAgICMgdG9waWPln7rnoYDlkI3np7AKICAgICAgICBzZWxmLnRvcGljX2Jhc2UgPSByb3NweS5nZXRfcGFyYW0oJ350b3BpY19iYXNlJywgJy9jYW1lcmFfZmlzaGV5ZScpCiAgICAgICAgCiAgICAgICAgIyDnm7jmnLrmlbDph4/pmZDliLYKICAgICAgICBzZWxmLm1heF9jYW1lcmFzID0gcm9zcHkuZ2V0X3BhcmFtKCd+Y2FtZXJhX2NvdW50JywgMykKICAgICAgICAKICAgICAgICAjIOiOt+WPlumFjee9rueahFVTQuerr+WPowogICAgICAgIHNlbGYudXNiX3BvcnQgPSByb3NweS5nZXRfcGFyYW0oJ351c2JfcG9ydCcsICcnKQoKICAgICAgICBzZWxmLnZpZGVvMF9tYWluID0gcm9zcHkuZ2V0X3BhcmFtKCd+dmlkZW9fMF9tYWluJywgJycpCiAgICAgICAgc2VsZi52aWRlbzBfc2VjID0gcm9zcHkuZ2V0X3BhcmFtKCd+dmlkZW9fMF9zZWMnLCAnJykKICAgICAgICBzZWxmLnZpZGVvMV9tYWluID0gcm9zcHkuZ2V0X3BhcmFtKCd+dmlkZW9fMV9tYWluJywgJycpCiAgICAgICAgc2VsZi52aWRlbzFfc2VjID0gcm9zcHkuZ2V0X3BhcmFtKCd+dmlkZW9fMV9zZWMnLCAnJykKICAgICAgICBzZWxmLnZpZGVvMl9tYWluID0gcm9zcHkuZ2V0X3BhcmFtKCd+dmlkZW9fMl9tYWluJywgJycpCiAgICAgICAgc2VsZi52aWRlbzJfc2VjID0gcm9zcHkuZ2V0X3BhcmFtKCd+dmlkZW9fMl9zZWMnLCAnJykKICAgICAgICAKICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiLnm7jmnLrphY3nva7liqDovb3lrozmiJA6IikKICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiIgIC0g6IqC54K55ZCNOiB7cm9zcHkuZ2V0X25hbWUoKX0iKQogICAgICAgICMgcm9zcHkubG9naW5mbyhmIiAgLSDmmL7npLrpooTop4g6IHtzZWxmLnNob3dfcHJldmlld30iKQogICAgICAgICMgcm9zcHkubG9naW5mbyhmIiAgLSDliIbovqjnjofliJfooag6IHtzZWxmLnJlc29sdXRpb25zfSIpCiAgICAgICAgIyByb3NweS5sb2dpbmZvKGYiICAtIFRvcGlj5Z+656GAOiB7c2VsZi50b3BpY19iYXNlfSIpCiAgICAgICAgIyByb3NweS5sb2dpbmZvKGYiICAtIOacgOWkp+ebuOacuuaVsDoge3NlbGYubWF4X2NhbWVyYXN9IikKICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiIgIC0gVVNC56uv5Y+jOiB7c2VsZi51c2JfcG9ydH0iKQogICAgICAgICMgcm9zcHkubG9naW5mbyhmIiAgLSB2aWRlbzBfbWFpbjoge3NlbGYudmlkZW8wX21haW59IikKICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiIgIC0gdmlkZW8wX3NlYzoge3NlbGYudmlkZW8wX3NlY30iKQogICAgICAgICMgcm9zcHkubG9naW5mbyhmIiAgLSB2aWRlbzFfbWFpbjoge3NlbGYudmlkZW8xX21haW59IikKICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiIgIC0gdmlkZW8xX3NlYzoge3NlbGYudmlkZW8xX3NlY30iKQogICAgICAgICMgcm9zcHkubG9naW5mbyhmIiAgLSB2aWRlbzJfbWFpbjoge3NlbGYudmlkZW8yX21haW59IikKICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiIgIC0gdmlkZW8yX3NlYzoge3NlbGYudmlkZW8yX3NlY30iKQoKICAgIGRlZiBfc2lnbmFsX2hhbmRsZXIoc2VsZiwgc2lnbnVtLCBmcmFtZSk6CiAgICAgICAgcm9zcHkubG9naW5mbyhmIlxu5o6l5pS25Yiw57uI5q2i5L+h5Y+3KHtzaWdudW19Ke+8jOato+WcqOWBnOatoumHh+mbhi4uLiIpCiAgICAgICAgc2VsZi5ydW5uaW5nID0gRmFsc2UKICAgICAgICByb3NweS5zaWduYWxfc2h1dGRvd24oIlVzZXIgcmVxdWVzdGVkIHNodXRkb3duIikKCiAgICBkZWYgX2dldF9waHlzaWNhbF9kZXZpY2VzKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzdWx0ID0gc3VicHJvY2Vzcy5ydW4oWyd2NGwyLWN0bCcsICctLWxpc3QtZGV2aWNlcyddLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgdGV4dD1UcnVlKQogICAgICAgICAgICBkZXZpY2VzID0gW10KICAgICAgICAgICAgY3VycmVudF9kZXYgPSAiIgogICAgICAgICAgICBkZXZpY2VfbmFtZXMgPSB7fQogICAgICAgICAgICAKICAgICAgICAgICAgZm9yIGxpbmUgaW4gcmVzdWx0LnN0ZG91dC5zcGxpdCgnXG4nKToKICAgICAgICAgICAgICAgIGlmIG5vdCBsaW5lLnN0cmlwKCk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmICc6JyBpbiBsaW5lIGFuZCBub3QgbGluZS5zdGFydHN3aXRoKCcvZGV2LycpOgogICAgICAgICAgICAgICAgICAgICMg6L+Z5piv6K6+5aSH5ZCN56ewCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9kZXYgPSBsaW5lLnNwbGl0KCc6JylbMF0uc3RyaXAoKQogICAgICAgICAgICAgICAgZWxpZiBsaW5lLnN0YXJ0c3dpdGgoJy9kZXYvdmlkZW8nKToKICAgICAgICAgICAgICAgICAgICAjIOi/meaYr+inhumikeiuvuWkh+i3r+W+hAogICAgICAgICAgICAgICAgICAgIGRldl9wYXRoID0gbGluZS5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoZGV2X3BhdGgpOgogICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VzLmFwcGVuZChkZXZfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlX25hbWVzW2Rldl9wYXRoXSA9IGN1cnJlbnRfZGV2CiAgICAgICAgICAgIAogICAgICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiLmo4DmtYvliLDmiYDmnInop4bpopHorr7lpIc6IHtkZXZpY2VzfSIpCiAgICAgICAgICAgICMgcm9zcHkubG9naW5mbyhmIuiuvuWkh+WQjeensOaYoOWwhDoge2RldmljZV9uYW1lc30iKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDlpoLmnpzmnInphY3nva7nmoRVU0Lnq6/lj6PvvIzov5vooYzov4fmu6QKICAgICAgICAgICAgaWYgc2VsZi51c2JfcG9ydCBhbmQgc2VsZi51c2JfcG9ydCAhPSAiIjoKICAgICAgICAgICAgICAgICMgcm9zcHkubG9naW5mbyhmIuS9v+eUqOmFjee9rueahFVTQuerr+WPo+i/h+a7pOinhumikeiuvuWkhzoge3NlbGYudXNiX3BvcnR9IikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDmj5Dlj5ZVU0LnvJblj7cKICAgICAgICAgICAgICAgIHVzYl9udW1iZXIgPSBOb25lCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaWYgJ3R0eVVTQicgaW4gc2VsZi51c2JfcG9ydDoKICAgICAgICAgICAgICAgICAgICAgICAgdXNiX251bWJlciA9IGludChzZWxmLnVzYl9wb3J0LnJlcGxhY2UoJy9kZXYvdHR5VVNCJywgJycpKQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ3R0eUFDTScgaW4gc2VsZi51c2JfcG9ydDoKICAgICAgICAgICAgICAgICAgICAgICAgdXNiX251bWJlciA9IGludChzZWxmLnVzYl9wb3J0LnJlcGxhY2UoJy9kZXYvdHR5QUNNJywgJycpKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZmlsdGVyZWRfZGV2aWNlcyA9IFtdCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZvciBkZXYgaW4gZGV2aWNlczoKICAgICAgICAgICAgICAgICAgICAjIOaWueazlTE6IOWwneivlemAmui/h+iuvuWkh+WQjeensOWMuemFjQogICAgICAgICAgICAgICAgICAgIGRldmljZV9uYW1lID0gZGV2aWNlX25hbWVzLmdldChkZXYsICcnKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMg5qOA5p+l6K6+5aSH5ZCN56ew5Lit5piv5ZCm5YyF5ZCrVVNC56uv5Y+j5L+h5oGvCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi51c2JfcG9ydCBpbiBkZXZpY2VfbmFtZSBvciBkZXZpY2VfbmFtZSBpbiBzZWxmLnVzYl9wb3J0OgogICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9kZXZpY2VzLmFwcGVuZChkZXYpCiAgICAgICAgICAgICAgICAgICAgICAgICMgcm9zcHkubG9naW5mbyhmIumAmui/h+WQjeensOWMuemFjeWIsOinhumikeiuvuWkhzoge2Rldn0gKOWQjeensDoge2RldmljZV9uYW1lfSkiKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMg5pa55rOVMjog5bCd6K+V6YCa6L+H57yW5Y+35Yy56YWNCiAgICAgICAgICAgICAgICAgICAgaWYgdXNiX251bWJlciBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9fbnVtYmVyID0gaW50KGRldi5yZXBsYWNlKCcvZGV2L3ZpZGVvJywgJycpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBVU0Lorr7lpIfpgJrluLjlr7nlupTnm7jlkIznvJblj7fnmoTop4bpopHorr7lpIcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZpZGVvX251bWJlciA9PSB1c2JfbnVtYmVyIG9yIHZpZGVvX251bWJlciA9PSB1c2JfbnVtYmVyICsgMSBvciB2aWRlb19udW1iZXIgPT0gdXNiX251bWJlciAtIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRfZGV2aWNlcy5hcHBlbmQoZGV2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcm9zcHkubG9naW5mbyhmIumAmui/h+e8luWPt+WMuemFjeWIsOinhumikeiuvuWkhzoge2Rldn0gKFVTQue8luWPtzoge3VzYl9udW1iZXJ9LCDop4bpopHnvJblj7c6IHt2aWRlb19udW1iZXJ9KSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMg5pa55rOVMzog5aaC5p6c5LiK6Z2i6YO95LiN5Yy56YWN77yM5qOA5p+l5piv5ZCm5Zyo5ZCM5LiA5LiqVVNC5oC757q/5LiKCiAgICAgICAgICAgICAgICAgICAgIyDojrflj5bop4bpopHorr7lpIfnmoRVU0Lkv6Hmga8KICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHVkZXZfY21kID0gWyd1ZGV2YWRtJywgJ2luZm8nLCAnLXEnLCAncGF0aCcsICctbicsIGRldl0KICAgICAgICAgICAgICAgICAgICAgICAgdWRldl9yZXN1bHQgPSBzdWJwcm9jZXNzLnJ1bih1ZGV2X2NtZCwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgdGV4dD1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICB1ZGV2X3BhdGggPSB1ZGV2X3Jlc3VsdC5zdGRvdXQuc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdWRldl9wYXRoIGFuZCAndXNiJyBpbiB1ZGV2X3BhdGg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIOaPkOWPllVTQuaAu+e6v+S/oeaBrwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNiX2luZm8gPSB1ZGV2X3BhdGguc3BsaXQoJy8nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHBhcnQgaW4gdXNiX2luZm86CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3VzYicgaW4gcGFydCBhbmQgbGVuKHBhcnQpID4gMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyDmr5TovoNVU0LmgLvnur8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNiX2NtZCA9IFsndWRldmFkbScsICdpbmZvJywgJy1xJywgJ3BhdGgnLCAnLW4nLCBzZWxmLnVzYl9wb3J0XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2JfcmVzdWx0ID0gc3VicHJvY2Vzcy5ydW4odXNiX2NtZCwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgdGV4dD1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2JfcGF0aCA9IHVzYl9yZXN1bHQuc3Rkb3V0LnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhcnQgaW4gdXNiX3BhdGg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9kZXZpY2VzLmFwcGVuZChkZXYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3NweS5sb2dpbmZvKGYi6YCa6L+HVVNC5oC757q/5Yy56YWN5Yiw6KeG6aKR6K6+5aSHOiB7ZGV2fSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBmaWx0ZXJlZF9kZXZpY2VzOgogICAgICAgICAgICAgICAgICAgIGRldmljZXMgPSBmaWx0ZXJlZF9kZXZpY2VzCiAgICAgICAgICAgICAgICAgICAgcm9zcHkubG9naW5mbyhmIui/h+a7pOWQjueahOinhumikeiuvuWkhzoge2RldmljZXN9IikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyByb3NweS5sb2dpbmZvKGYi5pyq5om+5Yiw5LiOIHtzZWxmLnVzYl9wb3J0fSDnm7jlhbPnmoTop4bpopHorr7lpIfvvIzkvb/nlKjliY0ge3NlbGYubWF4X2NhbWVyYXN9IOS4quiuvuWkhyIpCiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyByb3NweS5sb2dpbmZvKGYi5pyq5oyH5a6aVVNC56uv5Y+j77yM5L2/55So5YmNIHtzZWxmLm1heF9jYW1lcmFzfSDkuKrorr7lpIciKQogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAKICAgICAgICAgICAgIyDpmZDliLborr7lpIfmlbDph48KICAgICAgICAgICAgaWYgbGVuKGRldmljZXMpID4gc2VsZi5tYXhfY2FtZXJhczoKICAgICAgICAgICAgICAgIGRldmljZXMgPSBkZXZpY2VzWzpzZWxmLm1heF9jYW1lcmFzXQogICAgICAgICAgICAgICAgIyByb3NweS5sb2dpbmZvKGYi6ZmQ5Yi26K6+5aSH5pWw6YeP5Li6OiB7ZGV2aWNlc30iKQogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHNvcnRlZChsaXN0KHNldChkZXZpY2VzKSkpIGlmIGRldmljZXMgZWxzZSBzb3J0ZWQoZ2xvYi5nbG9iKCcvZGV2L3ZpZGVvKicpKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgIyByb3NweS5sb2dlcnIoZiLojrflj5bop4bpopHorr7lpIfml7blh7rplJk6IHtlfSIpCiAgICAgICAgICAgIHJldHVybiBzb3J0ZWQoZ2xvYi5nbG9iKCcvZGV2L3ZpZGVvKicpKQoKICAgIGRlZiBfdHJ5X3Jlc2V0X2RldmljZShzZWxmLCBkZXZfcGF0aCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB1ZGV2X2luZm8gPSBzdWJwcm9jZXNzLnJ1bigKICAgICAgICAgICAgICAgIFsndWRldmFkbScsICdpbmZvJywgJy1xJywgJ3BhdGgnLCAnLW4nLCBkZXZfcGF0aF0sCiAgICAgICAgICAgICAgICBjYXB0dXJlX291dHB1dD1UcnVlLCB0ZXh0PVRydWUKICAgICAgICAgICAgKS5zdGRvdXQuc3RyaXAoKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgdWRldl9pbmZvOgogICAgICAgICAgICAgICAgdXNiX3BhdGggPSBmIi9zeXN7dWRldl9pbmZvfS8uLi9yZXNldCIKICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHVzYl9wYXRoKToKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4odXNiX3BhdGgsICd3JykgYXMgZjoKICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSgnMScpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIF9pbml0X2NhbWVyYShzZWxmLCBkZXZfcGF0aCwgY2FtX2lkKToKICAgICAgICBmb3IgYXR0ZW1wdCBpbiByYW5nZSgzKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGRldl9wYXRoKToKICAgICAgICAgICAgICAgICAgICByb3NweS5sb2d3YXJuKGYi6K6+5aSHIHtkZXZfcGF0aH0g5LiN5a2Y5ZyoIikKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIGlmIGF0dGVtcHQgPiAwOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX3RyeV9yZXNldF9kZXZpY2UoZGV2X3BhdGgpCiAgICAgICAgICAgICAgICAgICAgb3Muc3lzdGVtKGYnc3VkbyBjaG1vZCA2NjYge2Rldl9wYXRofScpCiAgICAgICAgICAgICAgICAgICAgb3Muc3lzdGVtKGYnc3VkbyBmdXNlciAtayB7ZGV2X3BhdGh9IDI+L2Rldi9udWxsJykKCiAgICAgICAgICAgICAgICAjIOS9v+eUqOWUr+S4gOeahOebuOacuklE77yM6YG/5YWN5Yay56qBCiAgICAgICAgICAgICAgICB1bmlxdWVfY2FtX2lkID0gZiJ7c2VsZi5ub2RlX25hbWV9X2NhbXtjYW1faWR9IgogICAgICAgICAgICAgICAgY2FwID0gY3YyLlZpZGVvQ2FwdHVyZShkZXZfcGF0aCwgY3YyLkNBUF9WNEwyKQogICAgICAgICAgICAgICAgaWYgbm90IGNhcC5pc09wZW5lZCgpOgogICAgICAgICAgICAgICAgICAgICMgcm9zcHkubG9nd2FybignT3BlbkNW5peg5rOV5omT5byA6K6+5aSHJykKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgICAgICBjYXAuc2V0KGN2Mi5DQVBfUFJPUF9GT1VSQ0MsIGN2Mi5WaWRlb1dyaXRlcl9mb3VyY2MoJ00nLCdKJywnUCcsJ0cnKSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDlsJ3or5Xorr7nva7mjIflrprnmoTliIbovqjnjocKICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgICAgICAgICAgICAgYWN0dWFsX3dpZHRoID0gMAogICAgICAgICAgICAgICAgYWN0dWFsX2hlaWdodCA9IDAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yIHJlcyBpbiBzZWxmLnJlc29sdXRpb25zOgogICAgICAgICAgICAgICAgICAgIGNhcC5zZXQoY3YyLkNBUF9QUk9QX0ZSQU1FX1dJRFRILCByZXNbMF0pCiAgICAgICAgICAgICAgICAgICAgY2FwLnNldChjdjIuQ0FQX1BST1BfRlJBTUVfSEVJR0hULCByZXNbMV0pCiAgICAgICAgICAgICAgICAgICAgYWN0dWFsX3dpZHRoID0gaW50KGNhcC5nZXQoY3YyLkNBUF9QUk9QX0ZSQU1FX1dJRFRIKSkKICAgICAgICAgICAgICAgICAgICBhY3R1YWxfaGVpZ2h0ID0gaW50KGNhcC5nZXQoY3YyLkNBUF9QUk9QX0ZSQU1FX0hFSUdIVCkpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgYWN0dWFsX3dpZHRoID09IHJlc1swXSBhbmQgYWN0dWFsX2hlaWdodCA9PSByZXNbMV06CiAgICAgICAgICAgICAgICAgICAgICAgICMgcm9zcHkubG9naW5mbyhmIuaRhOWDj+WktHt1bmlxdWVfY2FtX2lkfeaIkOWKn+iuvue9ruS4uiB7YWN0dWFsX3dpZHRofXh7YWN0dWFsX2hlaWdodH0iKQogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMgcm9zcHkubG9nd2FybihmIuaRhOWDj+WktHt1bmlxdWVfY2FtX2lkfeaXoOazleiuvue9ruS4uiB7cmVzWzBdfXh7cmVzWzFdfSwg5a6e6ZmF5Li6IHthY3R1YWxfd2lkdGh9eHthY3R1YWxfaGVpZ2h0fSIpCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgbm90IHN1Y2Nlc3M6CiAgICAgICAgICAgICAgICAgICAgIyByb3NweS5sb2d3YXJuKGYi5pGE5YOP5aS0e3VuaXF1ZV9jYW1faWR95peg5rOV6K6+572u5Li65Lu75L2V5oyH5a6a5YiG6L6o546H77yM5L2/55So6buY6K6k5YiG6L6o546HIHthY3R1YWxfd2lkdGh9eHthY3R1YWxfaGVpZ2h0fSIpCiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSg1KToKICAgICAgICAgICAgICAgICAgICBjYXAuZ3JhYigpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAxKQoKICAgICAgICAgICAgICAgICMg5YaN5qyh6I635Y+W5a6e6ZmF5YiG6L6o546HCiAgICAgICAgICAgICAgICBhY3R1YWxfd2lkdGggPSBpbnQoY2FwLmdldChjdjIuQ0FQX1BST1BfRlJBTUVfV0lEVEgpKQogICAgICAgICAgICAgICAgYWN0dWFsX2hlaWdodCA9IGludChjYXAuZ2V0KGN2Mi5DQVBfUFJPUF9GUkFNRV9IRUlHSFQpKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIOS9v+eUqOWUr+S4gOeahOeql+WPo+WQjQogICAgICAgICAgICAgICAgd2luZG93X25hbWUgPSBmJ3tzZWxmLm5vZGVfbmFtZX1fe2NhbV9pZH1fe2FjdHVhbF93aWR0aH14e2FjdHVhbF9oZWlnaHR9JwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZWxmLmNhbWVyYXMuYXBwZW5kKHsKICAgICAgICAgICAgICAgICAgICAnaWQnOiBjYW1faWQsCiAgICAgICAgICAgICAgICAgICAgJ3VuaXF1ZV9pZCc6IHVuaXF1ZV9jYW1faWQsCiAgICAgICAgICAgICAgICAgICAgJ2NhcCc6IGNhcCwKICAgICAgICAgICAgICAgICAgICAnZGV2JzogZGV2X3BhdGgsCiAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lX2NvdW50JzogMCwKICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBhY3R1YWxfd2lkdGgsCiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6IGFjdHVhbF9oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgJ3dpbmRvd19uYW1lJzogd2luZG93X25hbWUKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcm9zcHkubG9nZXJyKGYi5bCd6K+VI3thdHRlbXB0KzF9IOWIneWni+WMliB7ZGV2X3BhdGh9IOWksei0pToge3N0cihlKX0iKQogICAgICAgICAgICAgICAgaWYgJ2NhcCcgaW4gbG9jYWxzKCkgYW5kIGNhcC5pc09wZW5lZCgpOgogICAgICAgICAgICAgICAgICAgIGNhcC5yZWxlYXNlKCkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgX2luaXRfY2FtZXJhcyhzZWxmKToKICAgICAgICBkZXZpY2VzID0gc2VsZi5fZ2V0X3BoeXNpY2FsX2RldmljZXMoKQogICAgICAgICMgcm9zcHkubG9naW5mbyhmIuWwhuWIneWni+WMlueahOinhumikeiuvuWkhzoge2RldmljZXN9IikKICAgICAgICBzZWxmLl9pbml0X21haW5fb3Jfc2Vjb25kX2NhbWVyYShzZWxmLnZpZGVvMF9tYWluLCBzZWxmLnZpZGVvMF9zZWMsIDApCiAgICAgICAgc2VsZi5faW5pdF9tYWluX29yX3NlY29uZF9jYW1lcmEoc2VsZi52aWRlbzFfbWFpbiwgc2VsZi52aWRlbzFfc2VjLCAxKQogICAgICAgIHNlbGYuX2luaXRfbWFpbl9vcl9zZWNvbmRfY2FtZXJhKHNlbGYudmlkZW8yX21haW4sIHNlbGYudmlkZW8yX3NlYywgMikKCgogICAgICAgIGlmIG5vdCBzZWxmLmNhbWVyYXM6CiAgICAgICAgICAgICMgcm9zcHkubG9nZXJyKCJcbuKdjCDplJnor6/vvJrmsqHmnInlj6/nlKjnmoTmkYTlg4/lpLQiKQogICAgICAgICAgICAjIHJvc3B5LmxvZ2luZm8oIuivt+aJp+ihjOS7peS4i+iviuaWreWRveS7pO+8miIpCiAgICAgICAgICAgICMgcm9zcHkubG9naW5mbygiMS4g5qOA5p+l6K6+5aSH6L+e5o6lOiBscyAvZGV2L3ZpZGVvKiIpCiAgICAgICAgICAgICMgcm9zcHkubG9naW5mbygiMi4g5p+l55yL6K6+5aSH5L+h5oGvOiB2NGwyLWN0bCAtLWxpc3QtZGV2aWNlcyIpCiAgICAgICAgICAgICMgcm9zcHkubG9naW5mbygiMy4g5L+u5aSN5p2D6ZmQOiBzdWRvIGNobW9kIDY2NiAvZGV2L3ZpZGVvKiIpCiAgICAgICAgICAgICMgcm9zcHkubG9naW5mbygiNC4g6YeN572uVVNC6K6+5aSHOiBzdWRvIHVzYi1yZXNldCIpCiAgICAgICAgICAgIGV4aXQoMSkKCiAgICBkZWYgX2luaXRfbWFpbl9vcl9zZWNvbmRfY2FtZXJhKHNlbGYsIGRldl9tYWluLCBkZXZfc2Vjb25kLCBpbmRleCk6CiAgICAgICAgaWYgc2VsZi5faW5pdF9jYW1lcmEoZGV2X21haW4sIGluZGV4KToKICAgICAgICAgICAgIyByb3NweS5sb2dpbmZvKGYi5oiQ5Yqf5Yid5aeL5YyW5pGE5YOP5aS0IHtkZXZfbWFpbn0g5Li6IHtzZWxmLmNhbWVyYXNbLTFdWyd1bmlxdWVfaWQnXX0iKQogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyByb3NweS5sb2d3YXJuKGYi4pqg77iPIOaXoOazleWIneWni+WMluiuvuWkhyB7ZGV2X21haW5977yM5bey6Lez6L+HIikKICAgICAgICAgICAgcGFzcwoKICAgICAgICBpZiBzZWxmLl9pbml0X2NhbWVyYShkZXZfc2Vjb25kLCBpbmRleCk6CiAgICAgICAgICAgICMgcm9zcHkubG9naW5mbyhmIuaIkOWKn+WIneWni+WMluaRhOWDj+WktCB7ZGV2X3NlY29uZH0g5Li6IHtzZWxmLmNhbWVyYXNbLTFdWyd1bmlxdWVfaWQnXX0iKQogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyByb3NweS5sb2d3YXJuKGYi4pqg77iPIOaXoOazleWIneWni+WMluiuvuWkhyB7ZGV2X3NlY29uZH3vvIzlt7Lot7Pov4ciKQogICAgICAgICAgICBwYXNzCgogICAgZGVmIF9pbml0X3Jvc19wdWJsaXNoZXJzKHNlbGYpOgogICAgICAgICIiIuWIneWni+WMllJPU+WPkeW4g+WZqCIiIgogICAgICAgIGZvciBjYW0gaW4gc2VsZi5jYW1lcmFzOgogICAgICAgICAgICAjIOS4uuavj+S4quaRhOWDj+WktOWIm+W7uuWvueW6lOeahHRvcGljCiAgICAgICAgICAgIGlmIHNlbGYudG9waWNfYmFzZToKICAgICAgICAgICAgICAgIGlmIGNhbVsnaWQnXSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHRvcGljX25hbWUgPSBmJ3tzZWxmLnRvcGljX2Jhc2V9L2NvbG9yL2ltYWdlX3JhdycKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdG9waWNfbmFtZSA9IGYne3NlbGYudG9waWNfYmFzZX1fe2NhbVsiaWQiXX0vY29sb3IvaW1hZ2VfcmF3JwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyDlkJHlkI7lhbzlrrkKICAgICAgICAgICAgICAgIGlmIGNhbVsnaWQnXSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHRvcGljX25hbWUgPSAnL2NhbWVyYV9maXNoZXllL2NvbG9yL2ltYWdlX3JhdycKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdG9waWNfbmFtZSA9IGYnL2NhbWVyYV9maXNoZXllL2NvbG9yL2ltYWdlX3Jhd197Y2FtWyJpZCJdICsgMX0nCiAgICAgICAgICAgIAogICAgICAgICAgICBwdWJsaXNoZXIgPSByb3NweS5QdWJsaXNoZXIodG9waWNfbmFtZSwgSW1hZ2UsIHF1ZXVlX3NpemU9MTApCiAgICAgICAgICAgIHNlbGYuaW1hZ2VfcHVibGlzaGVycy5hcHBlbmQoewogICAgICAgICAgICAgICAgJ3B1Ymxpc2hlcic6IHB1Ymxpc2hlciwKICAgICAgICAgICAgICAgICdjYW1faWQnOiBjYW1bJ2lkJ10sCiAgICAgICAgICAgICAgICAndW5pcXVlX2lkJzogY2FtWyd1bmlxdWVfaWQnXSwKICAgICAgICAgICAgICAgICd0b3BpY19uYW1lJzogdG9waWNfbmFtZQogICAgICAgICAgICB9KQogICAgICAgICAgICAjIHJvc3B5LmxvZ2luZm8oZiLmkYTlg4/lpLR7Y2FtWyd1bmlxdWVfaWQnXX3lj5HluIPliLB0b3BpYzoge3RvcGljX25hbWV9IikKCiAgICBkZWYgX3B1Ymxpc2hfZnJhbWUoc2VsZiwgY2FtX2lkLCBmcmFtZSwgdGltZXN0YW1wX25zKToKICAgICAgICAiIiLlj5HluIPlm77lg4/luKfliLBST1MgdG9waWMiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgICMg5qOA5p+lIGZyYW1lIOaYr+WQpuacieaViAogICAgICAgICAgICBpZiBmcmFtZSBpcyBOb25lIG9yIGZyYW1lLnNpemUgPT0gMDoKICAgICAgICAgICAgICAgICMgcm9zcHkubG9nd2FybihmIuaRhOWDj+WktHtjYW1faWR95Zu+5YOP5Li656m6IikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAKICAgICAgICAgICAgIyDmo4Dmn6Xlm77lg4/lvaLnirYKICAgICAgICAgICAgaWYgbGVuKGZyYW1lLnNoYXBlKSAhPSAzIG9yIGZyYW1lLnNoYXBlWzJdICE9IDM6CiAgICAgICAgICAgICAgICAjIHJvc3B5LmxvZ3dhcm4oZiLmkYTlg4/lpLR7Y2FtX2lkfeWbvuWDj+W9oueKtuS4jeato+ehrjoge2ZyYW1lLnNoYXBlfSIpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAjIOaJi+WKqOWIm+W7uiBST1MgSW1hZ2Ug5raI5oGvCiAgICAgICAgICAgIHJvc19pbWFnZSA9IEltYWdlKCkKICAgICAgICAgICAgCiAgICAgICAgICAgICMg6K6+572u5pe26Ze05oizCiAgICAgICAgICAgIHJvc19pbWFnZS5oZWFkZXIuc3RhbXAgPSByb3NweS5UaW1lLmZyb21fc2VjKHRpbWVzdGFtcF9ucyAvIDFlOSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMg6K6+572uIGZyYW1lX2lkCiAgICAgICAgICAgIGZvciBjYW0gaW4gc2VsZi5jYW1lcmFzOgogICAgICAgICAgICAgICAgaWYgY2FtWydpZCddID09IGNhbV9pZDoKICAgICAgICAgICAgICAgICAgICByb3NfaW1hZ2UuaGVhZGVyLmZyYW1lX2lkID0gY2FtWyd1bmlxdWVfaWQnXQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOiuvue9ruWbvuWDj+WPguaVsAogICAgICAgICAgICBoZWlnaHQsIHdpZHRoID0gZnJhbWUuc2hhcGVbOjJdCiAgICAgICAgICAgIHJvc19pbWFnZS5oZWlnaHQgPSBoZWlnaHQKICAgICAgICAgICAgcm9zX2ltYWdlLndpZHRoID0gd2lkdGgKICAgICAgICAgICAgCiAgICAgICAgICAgICMg5L2/55SoIEJHUjgg57yW56CB77yIT3BlbkNW6buY6K6k5qC85byP77yJCiAgICAgICAgICAgIHJvc19pbWFnZS5lbmNvZGluZyA9ICdiZ3I4JwogICAgICAgICAgICByb3NfaW1hZ2Uuc3RlcCA9IHdpZHRoICogMwogICAgICAgICAgICByb3NfaW1hZ2UuaXNfYmlnZW5kaWFuID0gMAogICAgICAgICAgICAKICAgICAgICAgICAgIyDnoa7kv53mlbDmja7mmK/ov57nu63nmoTlhoXlrZjlnZcKICAgICAgICAgICAgaWYgbm90IGZyYW1lLmZsYWdzWydDX0NPTlRJR1VPVVMnXToKICAgICAgICAgICAgICAgIGZyYW1lID0gbnAuYXNjb250aWd1b3VzYXJyYXkoZnJhbWUpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOiuvue9ruWbvuWDj+aVsOaNrgogICAgICAgICAgICByb3NfaW1hZ2UuZGF0YSA9IGZyYW1lLnRvYnl0ZXMoKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDlj5HluIPmtojmga8KICAgICAgICAgICAgZm9yIHB1Yl9pbmZvIGluIHNlbGYuaW1hZ2VfcHVibGlzaGVyczoKICAgICAgICAgICAgICAgIGlmIHB1Yl9pbmZvWydjYW1faWQnXSA9PSBjYW1faWQ6CiAgICAgICAgICAgICAgICAgICAgcHViX2luZm9bJ3B1Ymxpc2hlciddLnB1Ymxpc2gocm9zX2ltYWdlKQogICAgICAgICAgICAgICAgICAgIHJvc3B5LmxvZ2RlYnVnX29uY2UoZiLmiJDlip/lj5HluIPmkYTlg4/lpLR7Y2FtX2lkfeWbvuWDjzoge3dpZHRofXh7aGVpZ2h0fSIpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICMgcm9zcHkubG9nZXJyKGYi5Y+R5biD5pGE5YOP5aS0e2NhbV9pZH3lm77lg4/lpLHotKU6IHtzdHIoZSl9IikKICAgICAgICAgICAgcGFzcwoKICAgIGRlZiBfZGlzcGxheV9mcmFtZXMoc2VsZiwgZnJhbWVzX2RhdGEpOgogICAgICAgICIiIuaYvuekuuaRhOWDj+WktOeUu+mdoiIiIgogICAgICAgIGZvciBjYW0sIGZyYW1lIGluIGZyYW1lc19kYXRhOgogICAgICAgICAgICBpZiBmcmFtZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICMg5Zyo55S76Z2i5LiK5re75Yqg5pe26Ze05oiz5ZKM5bin6K6h5pWw5L+h5oGvCiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgPSB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIsIHRpbWUubG9jYWx0aW1lKCkpCiAgICAgICAgICAgICAgICBpbmZvX3RleHQgPSBmIntjYW1bJ3VuaXF1ZV9pZCddfSB8IHt0aW1lc3RhbXB9IHwgRnJhbWVzOiB7Y2FtWydmcmFtZV9jb3VudCddfSIKICAgICAgICAgICAgICAgIGN2Mi5wdXRUZXh0KGZyYW1lLCBpbmZvX3RleHQsICgxMCwgMzApLCBjdjIuRk9OVF9IRVJTSEVZX1NJTVBMRVgsIAogICAgICAgICAgICAgICAgICAgICAgICAgIDAuNywgKDAsIDI1NSwgMCksIDIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg5pi+56S655S76Z2iCiAgICAgICAgICAgICAgICBjdjIuaW1zaG93KGNhbVsnd2luZG93X25hbWUnXSwgZnJhbWUpCiAgICAgICAgCiAgICAgICAgIyDmo4Dmn6XmmK/lkKbmjInkuItFU0PplK4KICAgICAgICBpZiBjdjIud2FpdEtleSgxKSA9PSAyNzoKICAgICAgICAgICAgc2VsZi5ydW5uaW5nID0gRmFsc2UKCiAgICBkZWYgY2FwdHVyZV9mcmFtZXMoc2VsZik6CiAgICAgICAgIyByb3NweS5sb2dpbmZvKGYiXG7lvIDlp4vmjIHnu63ph4fpm4Yge2xlbihzZWxmLmNhbWVyYXMpfSDkuKrmkYTlg4/lpLQuLi4iKQogICAgICAgICMgcm9zcHkubG9naW5mbygi5oyJ5LiLRVND6ZSu5oiWQ3RybCtD5YGc5q2i6YeH6ZuGIikKICAgICAgICAKICAgICAgICAjIOWIm+W7uumihOiniOeql+WPowogICAgICAgIGlmIHNlbGYuc2hvd19wcmV2aWV3OgogICAgICAgICAgICBmb3IgY2FtIGluIHNlbGYuY2FtZXJhczoKICAgICAgICAgICAgICAgIFJFU0laRV9XSURUSCA9IDY0MAogICAgICAgICAgICAgICAgUkVTSVpFX0hFSUdIVCA9IDQ4MAogICAgICAgICAgICAgICAgIyDkvb/nlKjllK/kuIDnmoTnqpflj6PlkI0KICAgICAgICAgICAgICAgIGN2Mi5uYW1lZFdpbmRvdyhjYW1bJ3dpbmRvd19uYW1lJ10sIGN2Mi5XSU5ET1dfTk9STUFMKQogICAgICAgICAgICAgICAgY3YyLnJlc2l6ZVdpbmRvdyhjYW1bJ3dpbmRvd19uYW1lJ10sIFJFU0laRV9XSURUSCwgUkVTSVpFX0hFSUdIVCkKICAgICAgICAKICAgICAgICBmcmFtZV9udW0gPSAwCiAgICAgICAgcmF0ZSA9IHJvc3B5LlJhdGUoMzApICAjIDMwSHoKICAgICAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdoaWxlIHNlbGYucnVubmluZyBhbmQgbm90IHJvc3B5LmlzX3NodXRkb3duKCk6CiAgICAgICAgICAgICAgICBmcmFtZXNfZGF0YSA9IFtdCiAgICAgICAgICAgICAgICB0aW1lc3RhbXBfbnMgPSB0aW1lLnRpbWVfbnMoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIOivu+WPluaJgOacieaRhOWDj+WktOeahOW4pwogICAgICAgICAgICAgICAgZm9yIGNhbSBpbiBzZWxmLmNhbWVyYXM6CiAgICAgICAgICAgICAgICAgICAgcmV0LCBmcmFtZSA9IGNhbVsnY2FwJ10ucmVhZCgpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHJldDoKICAgICAgICAgICAgICAgICAgICAgICAgIyByb3NweS5sb2d3YXJuKGYi5pGE5YOP5aS0IHtjYW1bJ3VuaXF1ZV9pZCddfSDnrKx7ZnJhbWVfbnVtfeW4p+mHh+mbhuWksei0pSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMg5Y+R5biD5YiwUk9TCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3B1Ymxpc2hfZnJhbWUoY2FtWydpZCddLCBmcmFtZSwgdGltZXN0YW1wX25zKQogICAgICAgICAgICAgICAgICAgICAgICBjYW1bJ2ZyYW1lX2NvdW50J10gKz0gMQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGZyYW1lc19kYXRhLmFwcGVuZCgoY2FtLCBmcmFtZSkpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg5pi+56S65a6e5pe26aKE6KeICiAgICAgICAgICAgICAgICBpZiBzZWxmLnNob3dfcHJldmlldzoKICAgICAgICAgICAgICAgICAgICBzZWxmLl9kaXNwbGF5X2ZyYW1lcyhmcmFtZXNfZGF0YSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDmiZPljbDnirbmgIHkv6Hmga8KICAgICAgICAgICAgICAgICMgaWYgZnJhbWVfbnVtICUgMzAgPT0gMDoKICAgICAgICAgICAgICAgICMgICAgIHN0YXR1cyA9ICIgfCAiLmpvaW4oW2Yie2NhbVsndW5pcXVlX2lkJ119OntjYW1bJ2ZyYW1lX2NvdW50J1195binIiBmb3IgY2FtIGluIHNlbGYuY2FtZXJhc10pCiAgICAgICAgICAgICAgICAjICAgICByb3NweS5sb2dpbmZvKGYi5bey5Y+R5biDOiB7ZnJhbWVfbnVtKzF95binIHwg5pGE5YOP5aS054q25oCBOiB7c3RhdHVzfSIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZyYW1lX251bSArPSAxCiAgICAgICAgICAgICAgICByYXRlLnNsZWVwKCkKICAgICAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcm9zcHkubG9nZXJyKGYi6YeH6ZuG6L+H56iL5Lit5Ye66ZSZOiB7ZX0iKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNlbGYuX3JlbGVhc2VfcmVzb3VyY2VzKCkKICAgICAgICAgICAgIyBzZWxmLl9nZW5lcmF0ZV9yZXBvcnQoKQoKICAgIGRlZiBfcmVsZWFzZV9yZXNvdXJjZXMoc2VsZik6CiAgICAgICAgIiIi6YeK5pS+6LWE5rqQIiIiCiAgICAgICAgZm9yIGNhbSBpbiBzZWxmLmNhbWVyYXM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGNhbVsnY2FwJ10ucmVsZWFzZSgpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAKICAgICAgICAjIOWFs+mXreaJgOacieWxnuS6juacrOiKgueCueeahOeql+WPowogICAgICAgIGlmIHNlbGYuc2hvd19wcmV2aWV3OgogICAgICAgICAgICBmb3IgY2FtIGluIHNlbGYuY2FtZXJhczoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBjdjIuZGVzdHJveVdpbmRvdyhjYW1bJ3dpbmRvd19uYW1lJ10pCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgIGRlZiBfZ2VuZXJhdGVfcmVwb3J0KHNlbGYpOgogICAgICAgICIiIueUn+aIkOmHh+mbhuaKpeWRiiIiIgogICAgICAgIHJvc3B5LmxvZ2luZm8oIlxuPT09IOmHh+mbhuaKpeWRiiA9PT0iKQogICAgICAgIGZvciBjYW0gaW4gc2VsZi5jYW1lcmFzOgogICAgICAgICAgICByb3NweS5sb2dpbmZvKGYi5pGE5YOP5aS0e2NhbVsndW5pcXVlX2lkJ119W3tjYW1bJ2RldiddfV0iKQogICAgICAgICAgICByb3NweS5sb2dpbmZvKGYiICDliIbovqjnjoc6IHtjYW1bJ3dpZHRoJ119eHtjYW1bJ2hlaWdodCddfSIpCiAgICAgICAgICAgIHJvc3B5LmxvZ2luZm8oZiIgIOaIkOWKn+WPkeW4gzoge2NhbVsnZnJhbWVfY291bnQnXX3luKciKQogICAgICAgICAgICBmb3IgcHViX2luZm8gaW4gc2VsZi5pbWFnZV9wdWJsaXNoZXJzOgogICAgICAgICAgICAgICAgaWYgcHViX2luZm9bJ2NhbV9pZCddID09IGNhbVsnaWQnXToKICAgICAgICAgICAgICAgICAgICByb3NweS5sb2dpbmZvKGYiICBST1MgVG9waWM6IHtwdWJfaW5mb1sndG9waWNfbmFtZSddfSIpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICB0cnk6CiAgICAgICAgb3MubmljZSgtMjApCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKICAgIGN2Mi5zZXROdW1UaHJlYWRzKDEpCiAgICBjdjIuc2V0VXNlT3B0aW1pemVkKFRydWUpCgogICAgIyDov4fmu6RST1Poh6rliqjmt7vliqDnmoTlj4LmlbAKICAgIGltcG9ydCBhcmdwYXJzZQogICAgCiAgICByb3NfYXJncyA9IFsnX19uYW1lOj0nLCAnX19sb2c6PScsICdfX21hc3Rlcjo9JywgJ19faXA6PSddCiAgICBmaWx0ZXJlZF9hcmdzID0gW10KICAgIAogICAgZm9yIGFyZyBpbiBzeXMuYXJndlsxOl06CiAgICAgICAgaWYgbm90IGFueShhcmcuc3RhcnRzd2l0aChyb3NfYXJnKSBmb3Igcm9zX2FyZyBpbiByb3NfYXJncyk6CiAgICAgICAgICAgIGZpbHRlcmVkX2FyZ3MuYXBwZW5kKGFyZykKICAgIAogICAgc3lzLmFyZ3YgPSBbc3lzLmFyZ3ZbMF1dICsgZmlsdGVyZWRfYXJncwogICAgCiAgICAjIOino+aekOWRveS7pOihjOWPguaVsO+8iOeUqOS6juiwg+ivle+8iQogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoZGVzY3JpcHRpb249IkNhbWVyYSBjYXB0dXJlIHNjcmlwdCB3aXRoIFJPUyIpCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCItLW5vLXByZXZpZXciLCBkZXN0PSJzaG93X3ByZXZpZXciLCBhY3Rpb249InN0b3JlX2ZhbHNlIiwKICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJEaXNhYmxlIHByZXZpZXcgd2luZG93IikKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoIi0tdXNiLXBvcnQiLCB0eXBlPXN0ciwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJVU0IgcG9ydCBmb3IgZmlsdGVyaW5nIHZpZGVvIGRldmljZXMiKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS12aWRlb18wX21haW4iLCB0eXBlPXN0ciwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJjZW50ZXIgdmlkZW8gZGV2aWNlcyIpCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCItLXZpZGVvXzFfbWFpbiIsIHR5cGU9c3RyLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgIGhlbHA9InZpZGVvIGRldmljZXMiKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS12aWRlb18yX21haW4iLCB0eXBlPXN0ciwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJ2aWRlbyBkZXZpY2VzIikKICAgIAogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS12aWRlb18wX3NlYyIsIHR5cGU9c3RyLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgIGhlbHA9ImNlbnRlciB2aWRlbyBkZXZpY2VzIikKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoIi0tdmlkZW9fMV9zZWMiLCB0eXBlPXN0ciwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJsZWZ0IHZpZGVvIGRldmljZXMiKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS12aWRlb18yX3NlYyIsIHR5cGU9c3RyLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgIGhlbHA9InZpZGVvIGRldmljZXMiKQogICAgcGFyc2VyLnNldF9kZWZhdWx0cyhzaG93X3ByZXZpZXc9VHJ1ZSkKICAgIGFyZ3MgPSBwYXJzZXIucGFyc2VfYXJncygpCiAgICAKICAgIHRyeToKICAgICAgICAjIOeOsOWcqOS7jlJPU+WPguaVsOiOt+WPluaJgOaciemFjee9rgogICAgICAgIHJlY29yZGVyID0gQ2FtZXJhQ2FwdHVyZVJPUygpCiAgICAgICAgcmVjb3JkZXIuY2FwdHVyZV9mcmFtZXMoKQogICAgZXhjZXB0IHJvc3B5LlJPU0ludGVycnVwdEV4Y2VwdGlvbjoKICAgICAgICBwcmludCgiUk9T5Lit5patIikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIuKdjCDns7vnu5/ltKnmuoM6IHtzdHIoZSl9IikKICAgICAgICBwcmludCgiXG7wn5qRIOe0p+aApeaBouWkjeW7uuiurjoiKQogICAgICAgIHByaW50KCIxLiDniannkIbph43lkK/mkYTlg4/lpLTorr7lpIciKQogICAgICAgIHByaW50KCIyLiDmiafooYw6IHN1ZG8gcm1tb2QgdXZjdmlkZW8gJiYgc3VkbyBtb2Rwcm9iZSB1dmN2aWRlbyIpCiAgICAgICAgcHJpbnQoIjMuIOWwneivleWFtuS7llVTQuaOpeWPoyIp
'''

def decode_and_execute():
  """解码并执行源码"""
  try:
    # 解码源码
    source_code = base64.b64decode(ENCODED_SOURCE).decode('utf-8')
    
    # 编译并执行
    code = compile(source_code, 'camera_view_single.py', 'exec')
    
    # 创建模块
    module = types.ModuleType('camera_view_single')
    
    # 设置全局命名空间
    import builtins
    globals_dict = {
      '__name__': '__main__',
      '__file__': __file__,
      '__package__': None,
      '__builtins__': builtins,
    }
    
    # 执行编译后的代码
    exec(code, globals_dict)
    
    # 返回模块
    return module
  except Exception as e:
    print(f"解码错误: {e}")
    raise

def main():
  """主函数"""
  try:
    # 解码并获取模块
    module = decode_and_execute()
    
    # 调用原始main函数
    if hasattr(module, 'main'):
      sys.argv[0] = 'camera_view_single.py'
      module.main()
    else:
      # print("错误: 找不到main函数")
      sys.exit(1)
  except Exception as e:
    print(f"执行错误: {e}")
    import traceback
    traceback.print_exc()
    sys.exit(1)

if __name__ == '__main__':
  main()

#!/usr/bin/env python3
# 混淆的DAS节点
import sys
import os

_script_dir = os.path.dirname(os.path.abspath(__file__))
if _script_dir not in sys.path:
    sys.path.insert(0, _script_dir)

import base64
import marshal
import types

ENCODED_SOURCE = '''
IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIOWcqOaWh+S7tuW8gOWktOa3u+WKoOi3r+W+hOWkhOeQhgppbXBvcnQgc3lzCmltcG9ydCBvcwoKIyDoh6rliqjmt7vliqDohJrmnKznm67lvZXliLBQeXRob27ot6/lvoQKc2NyaXB0X2RpciA9IG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmFic3BhdGgoX19maWxlX18pKQppZiBzY3JpcHRfZGlyIG5vdCBpbiBzeXMucGF0aDoKICAgIHN5cy5wYXRoLmluc2VydCgwLCBzY3JpcHRfZGlyKQoKaW1wb3J0IHNlcmlhbAppbXBvcnQgc2VyaWFsLnRvb2xzLmxpc3RfcG9ydHMKaW1wb3J0IHRocmVhZGluZwppbXBvcnQgdGltZQppbXBvcnQganNvbgppbXBvcnQgbG9nZ2luZwppbXBvcnQgcXVldWUKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgc3RydWN0CmltcG9ydCBvcwppbXBvcnQgc3VicHJvY2Vzcwpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQpmcm9tIHBhY2sgaW1wb3J0IENtZFBhY2ssIE1lc3NhZ2VQYWNrLCBPcGNvZGUsIFJlY29yZFR5cGUKZnJvbSBkYXNfcHJvdG9jb2wgaW1wb3J0IERBU1Byb3RvY29sCgojIFJPU+ebuOWFs+WvvOWFpQppbXBvcnQgcm9zcHkKZnJvbSBzdGRfbXNncy5tc2cgaW1wb3J0IEZsb2F0MzIsIEludDhNdWx0aUFycmF5LCBJbnQxNk11bHRpQXJyYXksIE11bHRpQXJyYXlMYXlvdXQsIE11bHRpQXJyYXlEaW1lbnNpb24KCiMg5YWo5bGA5Y+Y6YeP55So5LqO5a2Y5YKodG9waWPlkI3np7AKVE9QSUNfTEVGVF9UQUNUSUxFID0gJy9kYXNfY29udHJvbGxlci90YWN0aWxlX3NpbmdsZV9sJwpUT1BJQ19SSUdIVF9UQUNUSUxFID0gJy9kYXNfY29udHJvbGxlci90YWN0aWxlX3NpbmdsZV9yJwpUT1BJQ19FTkNPREVSID0gJy9kYXNfY29udHJvbGxlci9lbmNvZGVyX2RhdGEnClRPUElDX1RBUkdFVF9ESVNUQU5DRSA9ICcvZGFzX2NvbnRyb2xsZXIvdGFyZ2V0X2RpcycKCmRlZiBsb2FkX3Jvc19wYXJhbXMoKToKICAgICIiIuS7jlJPU+WPguaVsOacjeWKoeWZqOWKoOi9vXRvcGlj6YWN572uIiIiCiAgICBnbG9iYWwgVE9QSUNfTEVGVF9UQUNUSUxFLCBUT1BJQ19SSUdIVF9UQUNUSUxFLCBUT1BJQ19FTkNPREVSLCBUT1BJQ19UQVJHRVRfRElTVEFOQ0UKICAgIAogICAgdHJ5OgogICAgICAgICMg6I635Y+W5Y+C5pWw77yM5L2/55So56eB5pyJ5ZG95ZCN56m66Ze0CiAgICAgICAgVE9QSUNfTEVGVF9UQUNUSUxFID0gcm9zcHkuZ2V0X3BhcmFtKCd+dG9waWNfbGVmdF90YWN0aWxlJywgJy9kYXNfY29udHJvbGxlci90YWN0aWxlX3NpbmdsZV9sJykKICAgICAgICBUT1BJQ19SSUdIVF9UQUNUSUxFID0gcm9zcHkuZ2V0X3BhcmFtKCd+dG9waWNfcmlnaHRfdGFjdGlsZScsICcvZGFzX2NvbnRyb2xsZXIvdGFjdGlsZV9zaW5nbGVfcicpCiAgICAgICAgVE9QSUNfRU5DT0RFUiA9IHJvc3B5LmdldF9wYXJhbSgnfnRvcGljX2VuY29kZXInLCAnL2Rhc19jb250cm9sbGVyL2VuY29kZXJfZGF0YScpCiAgICAgICAgVE9QSUNfVEFSR0VUX0RJU1RBTkNFID0gcm9zcHkuZ2V0X3BhcmFtKCd+dG9waWNfdGFyZ2V0X2Rpc3RhbmNlJywgJy9kYXNfY29udHJvbGxlci90YXJnZXRfZGlzJykKICAgICAgICAKICAgICAgICByb3NweS5sb2dpbmZvKCJEQVMgdG9waWPphY3nva7liqDovb3lrozmiJA6IikKICAgICAgICByb3NweS5sb2dpbmZvKGYiICDlt6bop6bop4k6IHtUT1BJQ19MRUZUX1RBQ1RJTEV9IikKICAgICAgICByb3NweS5sb2dpbmZvKGYiICDlj7Pop6bop4k6IHtUT1BJQ19SSUdIVF9UQUNUSUxFfSIpCiAgICAgICAgcm9zcHkubG9naW5mbyhmIiAg57yW56CB5ZmoOiB7VE9QSUNfRU5DT0RFUn0iKQogICAgICAgIHJvc3B5LmxvZ2luZm8oZiIgIOebruagh+i3neemuzoge1RPUElDX1RBUkdFVF9ESVNUQU5DRX0iKQogICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJvc3B5LmxvZ3dhcm4oZiLliqDovb1ST1Plj4LmlbDlpLHotKXvvIzkvb/nlKjpu5jorqTlgLw6IHtlfSIpCgpkZWYgdGFjdGlsZV9jYWxsYmFjayhyZWNvcmRfZGF0YTogYnl0ZXMpOgogICAgcHJpbnQoInRhY3RpbGUgZGF0YTogbGVuOiB7fSIuZm9ybWF0KGxlbihyZWNvcmRfZGF0YSkpKQogICAgIyDkv67mraPvvJrnoazku7blrp7pmYXmjqXmlLY0NDjlrZfoioLvvIzmlLnlm57mraPnoa7nmoTplb/luqbmo4Dmn6UKICAgIGlmIGxlbihyZWNvcmRfZGF0YSkgIT0gNDQ4OgogICAgICAgIHByaW50KGYi5pWw5o2u6ZW/5bqm6ZSZ6K+vOiDmnJ/mnJs0NDjlrZfoioIsIOWunumZhXtsZW4ocmVjb3JkX2RhdGEpfeWtl+iKgiIpCiAgICAgICAgcmV0dXJuCgogICAgaWYgbm90IGhhc2F0dHIodGFjdGlsZV9jYWxsYmFjaywgInB1Yl9pbml0aWFsaXplZCIpOgogICAgICAgICMg5LuO5YWo5bGA5Y+Y6YeP6I635Y+WdG9waWPlkI3np7AKICAgICAgICBsb2FkX3Jvc19wYXJhbXMoKQogICAgICAgIHRhY3RpbGVfY2FsbGJhY2subGVmdF9wdWJsaXNoZXJfdWludDggPSByb3NweS5QdWJsaXNoZXIoVE9QSUNfTEVGVF9UQUNUSUxFLCBJbnQ4TXVsdGlBcnJheSwgcXVldWVfc2l6ZT0xMCkKICAgICAgICB0YWN0aWxlX2NhbGxiYWNrLnJpZ2h0X3B1Ymxpc2hlcl91aW50OCA9IHJvc3B5LlB1Ymxpc2hlcihUT1BJQ19SSUdIVF9UQUNUSUxFLCBJbnQ4TXVsdGlBcnJheSwgcXVldWVfc2l6ZT0xMCkKICAgICAgICB0YWN0aWxlX2NhbGxiYWNrLnB1Yl9pbml0aWFsaXplZCA9IFRydWUKICAgICAgICBwcmludChmIuinpuinieS8oOaEn+WZqOaVsOaNruWPkeW4g+WZqOW3suWIneWni+WMliIpCiAgICAgICAgcHJpbnQoZiIgIOW3puS8oOaEn+WZqHRvcGljOiB7VE9QSUNfTEVGVF9UQUNUSUxFfSIpCiAgICAgICAgcHJpbnQoZiIgIOWPs+S8oOaEn+WZqHRvcGljOiB7VE9QSUNfUklHSFRfVEFDVElMRX0iKQogICAgCiAgICB0cnk6CiAgICAgICAgIyAxLiDop6PmnpDljp/lp4s0NDjlrZfoioLmlbDmja7vvJrlt6bkvKDmhJ/lmagyMjTlrZfoioIoMC0yMjMp44CB5Y+z5Lyg5oSf5ZmoMjI05a2X6IqCKDIyNC00NDcpCiAgICAgICAgcmF3X2xlZnRfMjI0ID0gW3N0cnVjdC51bnBhY2soIkIiLCByZWNvcmRfZGF0YVtpOmkrMV0pWzBdIGZvciBpIGluIHJhbmdlKDAsIDIyNCldCiAgICAgICAgcmF3X3JpZ2h0XzIyNCA9IFtzdHJ1Y3QudW5wYWNrKCJCIiwgcmVjb3JkX2RhdGFbaTppKzFdKVswXSBmb3IgaSBpbiByYW5nZSgyMjQsIDQ0OCldCiAgICAgICAgCiAgICAgICAgIyBwcmludChmIuWOn+Wni+aVsOaNriAtIOW3puS8oOaEn+WZqDoge2xlbihyYXdfbGVmdF8yMjQpfeS4qiwg6IyD5Zu0OnttaW4ocmF3X2xlZnRfMjI0KX1+e21heChyYXdfbGVmdF8yMjQpfSIpCiAgICAgICAgIyBwcmludChmIuWOn+Wni+aVsOaNriAtIOWPs+S8oOaEn+WZqDoge2xlbihyYXdfcmlnaHRfMjI0KX3kuKosIOiMg+WbtDp7bWluKHJhd19yaWdodF8yMjQpfX57bWF4KHJhd19yaWdodF8yMjQpfSIpCgogICAgICAgICMgMi4g5qC45b+D77ya5Y6f5aeL5pWw5o2uMeaLhjLvvIjlpI3liLbmianlsZXvvInvvIzlvpfliLA4OTbkuKrmnInmlYjmlbDmja7vvIgyMjTDlzIgKyAyMjTDlzLvvIkKICAgICAgICBsZWZ0X2V4cGFuZGVkXzQ0OCA9IFtdCiAgICAgICAgZm9yIHZhbCBpbiByYXdfbGVmdF8yMjQ6CiAgICAgICAgICAgIGxlZnRfZXhwYW5kZWRfNDQ4LmFwcGVuZCh2YWwpICAjIOWOn+aVsOaNrgogICAgICAgICAgICBsZWZ0X2V4cGFuZGVkXzQ0OC5hcHBlbmQodmFsKSAgIyDlpI3liLbmlbDmja7vvIjmjInljovlkIzmraXlj5jljJbvvIkKICAgICAgICAKICAgICAgICByaWdodF9leHBhbmRlZF80NDggPSBbXQogICAgICAgIGZvciB2YWwgaW4gcmF3X3JpZ2h0XzIyNDoKICAgICAgICAgICAgcmlnaHRfZXhwYW5kZWRfNDQ4LmFwcGVuZCh2YWwpICAjIOWOn+aVsOaNrgogICAgICAgICAgICByaWdodF9leHBhbmRlZF80NDguYXBwZW5kKHZhbCkgICMg5aSN5Yi25pWw5o2u77yI5oyJ5Y6L5ZCM5q2l5Y+Y5YyW77yJCgogICAgICAgICMgMy4g5Yid5aeL5YyWMTAw6KGMw5cxMOWIl+aAu+e9keagvO+8iDAtNDnooYw95bem5Lyg5oSf5Zmo77yMNTAtOTnooYw95Y+z5Lyg5oSf5Zmo77yJCiAgICAgICAgdG90YWxfZ3JpZCA9IFtbMCBmb3IgXyBpbiByYW5nZSgxMCldIGZvciBfIGluIHJhbmdlKDEwMCldCgogICAgICAgICMgNC4g5a6a5LmJ5omA5pyJ6ZyA6KaB5aGr5YWF6LSf5pWwKC0xKeeahOWdkOagh++8iOaMieWOi+aXoOWPmOWMlu+8iQogICAgICAgICMgNC4xIOW3puS8oOaEn+WZqO+8iDAtNDnooYzvvInotJ/mlbDlnZDmoIcKICAgICAgICBsZWZ0X25lZ19jb29yZHMgPSBbCiAgICAgICAgICAgICMg5bem5LiK6KeSCiAgICAgICAgICAgICgwLDApLCAoMCwxKSwgKDAsMiksICgxLDApLCAoMSwxKSwgKDIsMCksCiAgICAgICAgICAgICMg5Y+z5LiK6KeSCiAgICAgICAgICAgICgwLDcpLCAoMCw4KSwgKDAsOSksICgxLDgpLCAoMSw5KSwgKDIsOSksCiAgICAgICAgICAgICMg5bem5LiL6KeSCiAgICAgICAgICAgICg0OSwwKSwgKDQ5LDEpLCAoNDksMiksICg0OSwzKSwKICAgICAgICAgICAgKDQ4LDApLCAoNDgsMSksICg0OCwyKSwgKDQ4LDMpLAogICAgICAgICAgICAoNDcsMCksICg0NywxKSwgKDQ3LDIpLAogICAgICAgICAgICAoNDYsMCksICg0NiwxKSwgKDQ2LDIpLAogICAgICAgICAgICAoNDUsMCksICg0NSwxKSwgKDQ1LDIpLAogICAgICAgICAgICAoNDQsMCksICg0NCwxKSwKICAgICAgICAgICAgKDQzLDApLAogICAgICAgICAgICAjIOWPs+S4i+inkgogICAgICAgICAgICAoNDksNiksICg0OSw3KSwgKDQ5LDgpLCAoNDksOSksCiAgICAgICAgICAgICg0OCw2KSwgKDQ4LDcpLCAoNDgsOCksICg0OCw5KSwKICAgICAgICAgICAgKDQ3LDcpLCAoNDcsOCksICg0Nyw5KSwKICAgICAgICAgICAgKDQ2LDcpLCAoNDYsOCksICg0Niw5KSwKICAgICAgICAgICAgKDQ1LDcpLCAoNDUsOCksICg0NSw5KSwKICAgICAgICAgICAgKDQ0LDgpLCAoNDQsOSksCiAgICAgICAgICAgICg0Myw5KQogICAgICAgIF0KCiAgICAgICAgIyA0LjIg5Y+z5Lyg5oSf5Zmo77yINTAtOTnooYzvvInotJ/mlbDlnZDmoIcKICAgICAgICByaWdodF9uZWdfY29vcmRzID0gWwogICAgICAgICAgICAjIOW3puS4iuinkgogICAgICAgICAgICAoNTAsMCksICg1MCwxKSwgKDUwLDIpLCAoNTEsMCksICg1MSwxKSwgKDUyLDApLAogICAgICAgICAgICAjIOWPs+S4iuinkgogICAgICAgICAgICAoNTAsNyksICg1MCw4KSwgKDUwLDkpLCAoNTEsOCksICg1MSw5KSwgKDUyLDkpLAogICAgICAgICAgICAjIOW3puS4i+inkgogICAgICAgICAgICAoOTksMCksICg5OSwxKSwgKDk5LDIpLCAoOTksMyksCiAgICAgICAgICAgICg5OCwwKSwgKDk4LDEpLCAoOTgsMiksICg5OCwzKSwKICAgICAgICAgICAgKDk3LDApLCAoOTcsMSksICg5NywyKSwKICAgICAgICAgICAgKDk2LDApLCAoOTYsMSksICg5NiwyKSwKICAgICAgICAgICAgKDk1LDApLCAoOTUsMSksICg5NSwyKSwKICAgICAgICAgICAgKDk0LDApLCAoOTQsMSksCiAgICAgICAgICAgICg5MywwKSwKICAgICAgICAgICAgIyDlj7PkuIvop5IKICAgICAgICAgICAgKDk5LDYpLCAoOTksNyksICg5OSw4KSwgKDk5LDkpLAogICAgICAgICAgICAoOTgsNiksICg5OCw3KSwgKDk4LDgpLCAoOTgsOSksCiAgICAgICAgICAgICg5Nyw3KSwgKDk3LDgpLCAoOTcsOSksCiAgICAgICAgICAgICg5Niw3KSwgKDk2LDgpLCAoOTYsOSksCiAgICAgICAgICAgICg5NSw3KSwgKDk1LDgpLCAoOTUsOSksCiAgICAgICAgICAgICg5NCw4KSwgKDk0LDkpLAogICAgICAgICAgICAoOTMsOSkKICAgICAgICBdCgogICAgICAgICMgNS4g5aGr5YWF6LSf5pWw5Z2Q5qCH77yI5Zu65a6aLTHvvIzmjInljovml6Dlj5jljJbvvIkKICAgICAgICBmb3IgKHIsIGMpIGluIGxlZnRfbmVnX2Nvb3JkczoKICAgICAgICAgICAgdG90YWxfZ3JpZFtyXVtjXSA9IC0xCiAgICAgICAgZm9yIChyLCBjKSBpbiByaWdodF9uZWdfY29vcmRzOgogICAgICAgICAgICB0b3RhbF9ncmlkW3JdW2NdID0gLTEKCiAgICAgICAgIyA2LiDmjIki5LuO5bem5Yiw5Y+z44CB5LuO5LiK5Yiw5LiLIumhuuW6j+Whq+WFheaJqeWxleWQjueahOaVsOaNru+8iOaMieWOi+acieWPmOWMlu+8iQogICAgICAgICMgNi4xIOWhq+WFheW3puS8oOaEn+WZqO+8iDAtNDnooYzvvInmnInmlYjkvY3nva4KICAgICAgICBsZWZ0X2lkeCA9IDAKICAgICAgICBmb3Igcm93IGluIHJhbmdlKDUwKTogICAgICAgICAgIyDpgY3ljoYwLTQ56KGMCiAgICAgICAgICAgIGZvciBjb2wgaW4gcmFuZ2UoMTApOiAgICAgICMg6YGN5Y6GMC055YiX77yI5LuO5bem5Yiw5Y+z77yJCiAgICAgICAgICAgICAgICBpZiB0b3RhbF9ncmlkW3Jvd11bY29sXSAhPSAtMSBhbmQgbGVmdF9pZHggPCBsZW4obGVmdF9leHBhbmRlZF80NDgpOgogICAgICAgICAgICAgICAgICAgIHRvdGFsX2dyaWRbcm93XVtjb2xdID0gbGVmdF9leHBhbmRlZF80NDhbbGVmdF9pZHhdCiAgICAgICAgICAgICAgICAgICAgbGVmdF9pZHggKz0gMQoKICAgICAgICAjIDYuMiDloavlhYXlj7PkvKDmhJ/lmajvvIg1MC05OeihjO+8ieacieaViOS9jee9rgogICAgICAgIHJpZ2h0X2lkeCA9IDAKICAgICAgICBmb3Igcm93IGluIHJhbmdlKDUwLCAxMDApOiAgICAgIyDpgY3ljoY1MC05OeihjAogICAgICAgICAgICBmb3IgY29sIGluIHJhbmdlKDEwKTogICAgICAjIOmBjeWOhjAtOeWIl++8iOS7juW3puWIsOWPs++8iQogICAgICAgICAgICAgICAgaWYgdG90YWxfZ3JpZFtyb3ddW2NvbF0gIT0gLTEgYW5kIHJpZ2h0X2lkeCA8IGxlbihyaWdodF9leHBhbmRlZF80NDgpOgogICAgICAgICAgICAgICAgICAgIHRvdGFsX2dyaWRbcm93XVtjb2xdID0gcmlnaHRfZXhwYW5kZWRfNDQ4W3JpZ2h0X2lkeF0KICAgICAgICAgICAgICAgICAgICByaWdodF9pZHggKz0gMQoKICAgICAgICAjIDcuIOagvOW8j+WMlui+k+WHujEwMOihjMOXMTDliJfmlbDmja7vvIjotJ/mlbDmoIfnuqLvvIzmlrnkvr/mn6XnnIvvvIkKICAgICAgICAjIHByaW50KCJcbj09PT09PT09PT09PT09PT09PT09IOinpuinieS8oOaEn+WZqDEwMOihjMOXMTDliJfmlbDmja4gPT09PT09PT09PT09PT09PT09PT0iKQogICAgICAgICMgZm9yIHJvd19pZHggaW4gcmFuZ2UoMTAwKToKICAgICAgICAjICAgICByb3dfaXRlbXMgPSBbXQogICAgICAgICMgICAgIGZvciBjb2xfaWR4IGluIHJhbmdlKDEwKToKICAgICAgICAjICAgICAgICAgdmFsID0gdG90YWxfZ3JpZFtyb3dfaWR4XVtjb2xfaWR4XQogICAgICAgICMgICAgICAgICAjIOi0n+aVsOagh+e6ou+8jOato+aVsOato+W4uOaYvuekugogICAgICAgICMgICAgICAgICBpZiB2YWwgPT0gLTE6CiAgICAgICAgIyAgICAgICAgICAgICByb3dfaXRlbXMuYXBwZW5kKGYiXDAzM1s5MW17dmFsOjRkfVwwMzNbMG0iKQogICAgICAgICMgICAgICAgICBlbHNlOgogICAgICAgICMgICAgICAgICAgICAgcm93X2l0ZW1zLmFwcGVuZChmInt2YWw6NGR9IikKICAgICAgICAjICAgICAjIOaMieihjOaJk+WNsO+8jOagh+azqOihjOWPtwogICAgICAgICMgICAgIHByaW50KGYi6KGMe3Jvd19pZHg6M2R9OiB7JyAnLmpvaW4ocm93X2l0ZW1zKX0iKQogICAgICAgICMgcHJpbnQoIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIikKCiAgICAgICAgIyA4LiDmi4bliIbnvZHmoLzkuLrlt6blj7PkvKDmhJ/lmajmlbDmja7vvIzlsZXlubPlkI7lj5HluIPliLBST1MKICAgICAgICAjIDguMSDlt6bkvKDmhJ/lmajlsZXlubPvvIgwLTQ56KGMIOKGkiA1MDDkuKrmlbDmja7vvIkKICAgICAgICBsZWZ0X2ZsYXQgPSBbXQogICAgICAgIGZvciByb3cgaW4gcmFuZ2UoNTApOgogICAgICAgICAgICBsZWZ0X2ZsYXQuZXh0ZW5kKHRvdGFsX2dyaWRbcm93XSkKICAgICAgICAKICAgICAgICAjIDguMiDlj7PkvKDmhJ/lmajlsZXlubPvvIg1MC05OeihjCDihpIgNTAw5Liq5pWw5o2u77yJCiAgICAgICAgcmlnaHRfZmxhdCA9IFtdCiAgICAgICAgZm9yIHJvdyBpbiByYW5nZSg1MCwgMTAwKToKICAgICAgICAgICAgcmlnaHRfZmxhdC5leHRlbmQodG90YWxfZ3JpZFtyb3ddKQoKICAgICAgICAjIOi9rOaNouS4uuacieespuWPtzjkvY3mlbTmlbDvvIhST1Pml6BVSW50OE11bHRpQXJyYXnvvIzotJ/mlbAtMeS/neeVme+8iQogICAgICAgIG1zZ19sZWZ0ID0gSW50OE11bHRpQXJyYXkoKQogICAgICAgIG1zZ19sZWZ0LmRhdGEgPSBbeCBpZiB4ID09IC0xIGVsc2UgKHggaWYgeCA8IDEyOCBlbHNlIHggLSAyNTYpIGZvciB4IGluIGxlZnRfZmxhdF0KICAgICAgICAKICAgICAgICBtc2dfcmlnaHQgPSBJbnQ4TXVsdGlBcnJheSgpCiAgICAgICAgbXNnX3JpZ2h0LmRhdGEgPSBbeCBpZiB4ID09IC0xIGVsc2UgKHggaWYgeCA8IDEyOCBlbHNlIHggLSAyNTYpIGZvciB4IGluIHJpZ2h0X2ZsYXRdCgogICAgICAgICMg5Y+R5biDUk9T5raI5oGvCiAgICAgICAgdGFjdGlsZV9jYWxsYmFjay5sZWZ0X3B1Ymxpc2hlcl91aW50OC5wdWJsaXNoKG1zZ19sZWZ0KQogICAgICAgIHRhY3RpbGVfY2FsbGJhY2sucmlnaHRfcHVibGlzaGVyX3VpbnQ4LnB1Ymxpc2gobXNnX3JpZ2h0KQoKICAgICAgICAjIOaJk+WNsOWPkeW4g+e7n+iuoQogICAgICAgIGxlZnRfbmVnX2NvdW50ID0gc3VtKDEgZm9yIHggaW4gbGVmdF9mbGF0IGlmIHggPT0gLTEpCiAgICAgICAgcmlnaHRfbmVnX2NvdW50ID0gc3VtKDEgZm9yIHggaW4gcmlnaHRfZmxhdCBpZiB4ID09IC0xKQogICAgICAgICMgcHJpbnQoZiLinIUg5Y+R5biD5a6M5oiQ77yBIikKICAgICAgICAjIHByaW50KGYiICAg5bem5Lyg5oSf5Zmo77yaNTAw5Liq5pWw5o2u77yI6LSf5pWwe2xlZnRfbmVnX2NvdW50feS4qu+8jOacieaViHs1MDAtbGVmdF9uZWdfY291bnR95Liq77yJIikKICAgICAgICAjIHByaW50KGYiICAg5Y+z5Lyg5oSf5Zmo77yaNTAw5Liq5pWw5o2u77yI6LSf5pWwe3JpZ2h0X25lZ19jb3VudH3kuKrvvIzmnInmlYh7NTAwLXJpZ2h0X25lZ19jb3VudH3kuKrvvIkiKQogICAgICAgICMgcHJpbnQoZiIgICDmgLvmlbDmja7ph4/vvJp7bGVuKGxlZnRfZmxhdCkrbGVuKHJpZ2h0X2ZsYXQpfeS4qu+8iDEwMMOXMTDvvInvvIzmnInmlYjmlbDmja44OTbkuKrvvIg0NDjDlzLvvIkiKQogICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYi5aSE55CG6Kem6KeJ5pWw5o2u6ZSZ6K+vOiB7ZX0iKQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKQoKICAgICAgICAKCmRlZiBlbmNvZGVyX2NhbGxiYWNrKHJlY29yZF9kYXRhOiBieXRlcyk6CiAgICAjIOWIm+W7ulJPU+WPkeW4g+WZqO+8iOWNleS+i+aooeW8j++8iQogICAgaWYgbm90IGhhc2F0dHIoZW5jb2Rlcl9jYWxsYmFjaywgInB1Yl9pbml0aWFsaXplZCIpOgogICAgICAgICMg5LuO5YWo5bGA5Y+Y6YeP6I635Y+WdG9waWPlkI3np7AKICAgICAgICBsb2FkX3Jvc19wYXJhbXMoKQogICAgICAgIGVuY29kZXJfY2FsbGJhY2sucHVibGlzaGVyID0gcm9zcHkuUHVibGlzaGVyKFRPUElDX0VOQ09ERVIsIEZsb2F0MzIsIHF1ZXVlX3NpemU9MTApCiAgICAgICAgZW5jb2Rlcl9jYWxsYmFjay5wdWJfaW5pdGlhbGl6ZWQgPSBUcnVlCiAgICAgICAgcHJpbnQoZiLnvJbnoIHlmajmlbDmja7lj5HluIPlmajlt7LliJ3lp4vljJY6IHtUT1BJQ19FTkNPREVSfSIpCiAgICAKICAgIGVuY29kZXJfdmFsdWUgPSBzdHJ1Y3QudW5wYWNrKCI+ZiIsIHJlY29yZF9kYXRhKVswXQogICAgIyBwcmludCgKICAgICMgICAgICJlbmNvZGVyIGRhdGE6IHt9LCBsZW46IHt9LCBlbmNvZGVyX3ZhbHVlOiB7fSIuZm9ybWF0KAogICAgIyAgICAgICAgIHJlY29yZF9kYXRhLCBsZW4ocmVjb3JkX2RhdGEpLCBlbmNvZGVyX3ZhbHVlCiAgICAjICAgICApCiAgICAjICkKICAgIAogICAgIyDlj5HluIPnvJbnoIHlmajmlbDmja7liLBST1Por53popgKICAgIHRyeToKICAgICAgICBtc2cgPSBGbG9hdDMyKCkKICAgICAgICBtc2cuZGF0YSA9IGVuY29kZXJfdmFsdWUKICAgICAgICBlbmNvZGVyX2NhbGxiYWNrLnB1Ymxpc2hlci5wdWJsaXNoKG1zZykKICAgICAgICAjIHByaW50KGYi5Y+R5biD57yW56CB5Zmo5pWw5o2uOiB7ZW5jb2Rlcl92YWx1ZX0iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYi5Y+R5biD57yW56CB5Zmo5pWw5o2u5pe25Ye66ZSZOiB7ZX0iKQoKCmRlZiBlY2hvX2NhbGxiYWNrKHJlY29yZF9kYXRhOiBieXRlcyk6CiAgICBwcmludCgiZWNobyBkYXRhOiB7fSIuZm9ybWF0KHJlY29yZF9kYXRhKSkKCgpjbGFzcyBEYXRhQnVzOgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgdHR5X3BvcnQ9Ii9kZXYvdHR5VVNCMCIsCiAgICAgICAgYmF1ZHJhdGU9MTE1MjAwLAogICAgICAgIHRpbWVvdXQ9MC41LAogICAgICAgIGVuY29kZXJfZnJlcTogZmxvYXQgPSBOb25lLAogICAgICAgIHRhY3RpbGVfZnJlcTogZmxvYXQgPSBOb25lLAogICAgKToKICAgICAgICAjIOWIneWni+WMllJPU+iKgueCuQogICAgICAgIHRyeToKICAgICAgICAgICAgcm9zcHkuaW5pdF9ub2RlKCdkYXNfcm9zX2ludGVyZmFjZScsIGFub255bW91cz1UcnVlKQogICAgICAgIGV4Y2VwdCByb3NweS5leGNlcHRpb25zLlJPU0V4Y2VwdGlvbjoKICAgICAgICAgICAgIyDlpoLmnpzlt7Lnu4/liJ3lp4vljJbvvIzlj6rojrflj5boioLngrnlkI0KICAgICAgICAgICAgcGFzcwogICAgICAgIAogICAgICAgICMg5Yqg6L29dG9waWPphY3nva4KICAgICAgICBsb2FkX3Jvc19wYXJhbXMoKQogICAgICAgIAogICAgICAgIHNlbGYudHR5X3BvcnQgPSB0dHlfcG9ydAogICAgICAgIHNlbGYuYmF1ZHJhdGUgPSBiYXVkcmF0ZQogICAgICAgIHNlbGYudGltZW91dCA9IHRpbWVvdXQKICAgICAgICBzZWxmLnNlciA9IE5vbmUKICAgICAgICBzZWxmLmlzX3J1bm5pbmcgPSBGYWxzZQoKICAgICAgICBzZWxmLl9vcGVuX3NlcmlhbF9zdWNjZXNzID0gRmFsc2UKICAgICAgICBzZWxmLnByb3RvY29sOiBEQVNQcm90b2NvbCA9IERBU1Byb3RvY29sKCkKICAgICAgICBzZWxmLmRhdGFfYnVmZmVyOiBieXRlcyA9IGIiIgogICAgICAgIHNlbGYuZGF0YV9idWZmZXJfbG9jayA9IHRocmVhZGluZy5Mb2NrKCkKICAgICAgICBzZWxmLnNlcmlhbF9sb2NrID0gdGhyZWFkaW5nLkxvY2soKQoKICAgICAgICBzZWxmLmNtZF9xdWV1ZSA9IHF1ZXVlLlF1ZXVlKDEwMDApCgogICAgICAgIHNlbGYucmVhZF90aHJlYWQ6IHRocmVhZGluZy5UaHJlYWQgPSBOb25lCiAgICAgICAgc2VsZi5wYXJzZV90aHJlYWQ6IHRocmVhZGluZy5UaHJlYWQgPSBOb25lCiAgICAgICAgc2VsZi5zZW5kX3RocmVhZDogdGhyZWFkaW5nLlRocmVhZCA9IE5vbmUKCiAgICAgICAgc2VsZi5lbmNvZGVyX2ZyZXEgPSBlbmNvZGVyX2ZyZXEKICAgICAgICBzZWxmLnRhY3RpbGVfZnJlcSA9IHRhY3RpbGVfZnJlcQogICAgICAgIHNlbGYuZW5jb2Rlcl90aHJlYWQ6IHRocmVhZGluZy5UaHJlYWQgPSBOb25lCiAgICAgICAgc2VsZi50YWN0aWxlX3RocmVhZDogdGhyZWFkaW5nLlRocmVhZCA9IE5vbmUKICAgICAgICAKICAgICAgICBzZWxmLmdyaXBwZXJfZGlzID0gMC4wCiAgICAgICAgc2VsZi5hbmdsZV9sb2NrID0gdGhyZWFkaW5nLkxvY2soKQoKICAgICAgICBzZWxmLnRhY3RpbGVfY2FsbGJhY2sgPSB0YWN0aWxlX2NhbGxiYWNrCiAgICAgICAgc2VsZi5lbmNvZGVyX2NhbGxiYWNrID0gZW5jb2Rlcl9jYWxsYmFjawogICAgICAgIHNlbGYuZWNob19jYWxsYmFjayA9IGVjaG9fY2FsbGJhY2sKCiAgICAgICAgIyDliJ3lp4vljJZST1PorqLpmIXlmagKICAgICAgICBzZWxmLl9pbml0X3Jvc19zdWJzY3JpYmVycygpCgogICAgICAgIHNlbGYuX29wZW5fc2VyaWFsKCkKICAgICAgICBzZWxmLmlzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgc2VsZi5fc3RhcnRfcmVhZGluZygpCiAgICAgICAgc2VsZi5fc3RhcnRfcGFyc2luZygpCiAgICAgICAgc2VsZi5fc3RhcnRfc2VuZGluZygpCiAgICAgICAgCiAgICAgICAgIyDkv67mraPvvJrkvb/nlKjni6znq4vnur/nqIvlkK/liqjlvqrnjq8KICAgICAgICBpZiBzZWxmLmVuY29kZXJfZnJlcToKICAgICAgICAgICAgc2VsZi5fc3RhcnRfZW5jb2Rlcl9sb29wKCkKICAgICAgICBpZiBzZWxmLnRhY3RpbGVfZnJlcToKICAgICAgICAgICAgc2VsZi5fc3RhcnRfdGFjdGlsZV9sb29wKCkKCiAgICBkZWYgX2luaXRfcm9zX3N1YnNjcmliZXJzKHNlbGYpOgogICAgICAgICIiIuWIneWni+WMllJPU+iuoumYheWZqCIiIgogICAgICAgICMg6K6i6ZiF5aS554iq5byA5ZCI5bqm5oyH5LukCiAgICAgICAgc2VsZi5tb3Rvcl9jbWRfc3Vic2NyaWJlciA9IHJvc3B5LlN1YnNjcmliZXIoCiAgICAgICAgICAgIFRPUElDX1RBUkdFVF9ESVNUQU5DRSwgCiAgICAgICAgICAgIEZsb2F0MzIsIAogICAgICAgICAgICBzZWxmLl9tb3Rvcl9jb21tYW5kX2NhbGxiYWNrCiAgICAgICAgKQogICAgICAgIHByaW50KGYiUk9T6K6i6ZiF5Zmo5bey5Yid5aeL5YyW77yae1RPUElDX1RBUkdFVF9ESVNUQU5DRX0iKQoKICAgIGRlZiBfbW90b3JfY29tbWFuZF9jYWxsYmFjayhzZWxmLCBtc2cpOgogICAgICAgIHRyeToKICAgICAgICAgICAgd2l0aCBzZWxmLmFuZ2xlX2xvY2s6CiAgICAgICAgICAgICAgICBzZWxmLmdyaXBwZXJfZGlzID0gbXNnLmRhdGEKICAgICAgICAgICAgcHJpbnQoZiLkuIvlj5HlvIDluqbmjIfku6Q6IHttc2cuZGF0YX0gbSIpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmIuWkhOeQhueUteacuuaMh+S7pOaXtuWHuumUmToge2V9IikKCiAgICBkZWYgZHJpdmVfbW90b3Ioc2VsZiwgYW5nbGVfZGdyZWU6IGZsb2F0KToKICAgICAgICBzZWxmLmFkZF9jbWQoCiAgICAgICAgICAgIENtZFBhY2sucGFjaygKICAgICAgICAgICAgICAgIG9wY29kZT1PcGNvZGUuV3JpdGVEcml2ZSwKICAgICAgICAgICAgICAgIHJlY29yZF90eXBlPVJlY29yZFR5cGUuRHJpdmUsCiAgICAgICAgICAgICAgICByZWNvcmQ9c3RydWN0LnBhY2soIj5mIiwgYW5nbGVfZGdyZWUpLAogICAgICAgICAgICApCiAgICAgICAgKQoKICAgIGRlZiBkaXNhYmxlX21vdG9yKHNlbGYpOgogICAgICAgIHNlbGYuYWRkX2NtZCgKICAgICAgICAgICAgQ21kUGFjay5wYWNrKAogICAgICAgICAgICAgICAgb3Bjb2RlPU9wY29kZS5EaXNhYmxlRHJpdmUsCiAgICAgICAgICAgICAgICByZWNvcmRfdHlwZT1SZWNvcmRUeXBlLkRyaXZlLAogICAgICAgICAgICApCiAgICAgICAgKQogICAgCiAgICBkZWYgY2FsaWJfZW5jb2RlcihzZWxmKToKICAgICAgICBzZWxmLmFkZF9jbWQoCiAgICAgICAgICAgIENtZFBhY2sucGFjaygKICAgICAgICAgICAgICAgIG9wY29kZT1PcGNvZGUuQ2FsaWJFbmNvZGVyLAogICAgICAgICAgICAgICAgcmVjb3JkX3R5cGU9UmVjb3JkVHlwZS5Ecml2ZSwKICAgICAgICAgICAgKQogICAgICAgICkKCiAgICBkZWYgYWRkX2NtZChzZWxmLCBjbWQ6IENtZFBhY2spIC0+IGJvb2w6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmNtZF9xdWV1ZS5wdXQoY21kLCBibG9jaz1UcnVlLCB0aW1lb3V0PTEpCiAgICAgICAgICAgICMgcHJpbnQoZiLlkb3ku6Tmt7vliqDliLDpmJ/liJfvvIzlvZPliY3pmJ/liJflpKflsI86IHtzZWxmLmNtZF9xdWV1ZS5xc2l6ZSgpfSIpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IHF1ZXVlLkZ1bGw6CiAgICAgICAgICAgIHByaW50KCLlkb3ku6TpmJ/liJflt7Lmu6HvvIzmt7vliqDlpLHotKUiKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgaXNfb3BlbmQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX29wZW5fc2VyaWFsX3N1Y2Nlc3MKCiAgICBkZWYgcmVnaXN0ZXJfdGFjdGlsZV9jYWxsYmFjayhzZWxmLCBjYWxsYmFjayk6CiAgICAgICAgc2VsZi50YWN0aWxlX2NhbGxiYWNrID0gY2FsbGJhY2sKCiAgICBkZWYgcmVnaXN0ZXJfZW5jb2Rlcl9jYWxsYmFjayhzZWxmLCBjYWxsYmFjayk6CiAgICAgICAgc2VsZi5lbmNvZGVyX2NhbGxiYWNrID0gY2FsbGJhY2sKCiAgICBkZWYgX29wZW5fc2VyaWFsKHNlbGYpOgogICAgICAgIHNlbGYuc2VyID0gc2VyaWFsLlNlcmlhbCgKICAgICAgICAgICAgcG9ydD1zZWxmLnR0eV9wb3J0LAogICAgICAgICAgICBiYXVkcmF0ZT1zZWxmLmJhdWRyYXRlLAogICAgICAgICAgICB0aW1lb3V0PXNlbGYudGltZW91dCwKICAgICAgICAgICAgcGFyaXR5PXNlcmlhbC5QQVJJVFlfTk9ORSwKICAgICAgICAgICAgc3RvcGJpdHM9c2VyaWFsLlNUT1BCSVRTX09ORSwKICAgICAgICAgICAgYnl0ZXNpemU9c2VyaWFsLkVJR0hUQklUUywKICAgICAgICApCgogICAgICAgIGlmIHNlbGYuc2VyLmlzX29wZW46CiAgICAgICAgICAgIHByaW50KGYib3BlbiB7c2VsZi50dHlfcG9ydH0gc3VjY2VzcyEsIGJhdWRyYXRlOiB7c2VsZi5iYXVkcmF0ZX0iKQogICAgICAgICAgICBzZWxmLl9vcGVuX3NlcmlhbF9zdWNjZXNzID0gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYib3BlbiB7c2VsZi50dHlfcG9ydH0gZmFpbGVkISwgYmF1ZHJhdGU6IHtzZWxmLmJhdWRyYXRlfSIpCiAgICAgICAgICAgIHNlbGYuX29wZW5fc2VyaWFsX3N1Y2Nlc3MgPSBGYWxzZQoKICAgIGRlZiBfc3RhcnRfcmVhZGluZyhzZWxmKToKICAgICAgICBzZWxmLnJlYWRfdGhyZWFkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi5fcmVhZGluZ19sb29wKQogICAgICAgIHNlbGYucmVhZF90aHJlYWQuZGFlbW9uID0gVHJ1ZQogICAgICAgIHNlbGYucmVhZF90aHJlYWQuc3RhcnQoKQogICAgICAgIHByaW50KCLor7vlj5bnur/nqIvlt7LlkK/liqgiKQogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIF9zdGFydF9wYXJzaW5nKHNlbGYpOgogICAgICAgIHNlbGYucGFyc2VfdGhyZWFkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi5fcGFyc2luZ19sb29wKQogICAgICAgIHNlbGYucGFyc2VfdGhyZWFkLmRhZW1vbiA9IFRydWUKICAgICAgICBzZWxmLnBhcnNlX3RocmVhZC5zdGFydCgpCiAgICAgICAgcHJpbnQoIuino+aekOe6v+eoi+W3suWQr+WKqCIpCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX3N0YXJ0X2VuY29kZXJfbG9vcChzZWxmKToKICAgICAgICAiIiLmraPnoa7lkK/liqjnvJbnoIHlmajlvqrnjq/nur/nqIsiIiIKICAgICAgICBzZWxmLmVuY29kZXJfdGhyZWFkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi5fc2VuZF9lbmNvZGVyX2xvb3ApCiAgICAgICAgc2VsZi5lbmNvZGVyX3RocmVhZC5kYWVtb24gPSBUcnVlCiAgICAgICAgc2VsZi5lbmNvZGVyX3RocmVhZC5zdGFydCgpCiAgICAgICAgcHJpbnQoIue8lueggeWZqOW+queOr+e6v+eoi+W3suWQr+WKqCIpCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX3N0YXJ0X3RhY3RpbGVfbG9vcChzZWxmKToKICAgICAgICAiIiLmraPnoa7lkK/liqjop6bop4nlvqrnjq/nur/nqIsiIiIKICAgICAgICBzZWxmLnRhY3RpbGVfdGhyZWFkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi5fc2VuZF90YWN0aWxlX2xvb3ApCiAgICAgICAgc2VsZi50YWN0aWxlX3RocmVhZC5kYWVtb24gPSBUcnVlCiAgICAgICAgc2VsZi50YWN0aWxlX3RocmVhZC5zdGFydCgpCiAgICAgICAgcHJpbnQoIuinpuinieW+queOr+e6v+eoi+W3suWQr+WKqCIpCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgX3N0YXJ0X3NlbmRpbmcoc2VsZik6CiAgICAgICAgc2VsZi5zZW5kX3RocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXNlbGYuX3NlbmRpbmdfbG9vcCkKICAgICAgICBzZWxmLnNlbmRfdGhyZWFkLmRhZW1vbiA9IFRydWUKICAgICAgICBzZWxmLnNlbmRfdGhyZWFkLnN0YXJ0KCkKICAgICAgICBwcmludCgi5Y+R6YCB57q/56iL5bey5ZCv5YqoIikKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBfc2VuZGluZ19sb29wKHNlbGYpOgogICAgICAgICIiIuWPkemAgee6v+eoi+S4u+W+queOryIiIgogICAgICAgIHdoaWxlIHNlbGYuaXNfcnVubmluZyBhbmQgbm90IHJvc3B5LmlzX3NodXRkb3duKCk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGNtZDogQ21kUGFjayA9IHNlbGYuY21kX3F1ZXVlLmdldChibG9jaz1UcnVlLCB0aW1lb3V0PTAuMSkKICAgICAgICAgICAgICAgIHdpdGggc2VsZi5zZXJpYWxfbG9jazoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnNlciBhbmQgc2VsZi5zZXIuaXNfb3BlbjoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXIud3JpdGUoY21kLmRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VyLmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgIyBwcmludChmIuWPkemAgeWRveS7pDoge2NtZC5kYXRhfSwg6Zif5YiX5Ymp5L2ZOiB7c2VsZi5jbWRfcXVldWUucXNpemUoKX0iKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBxdWV1ZS5FbXB0eToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KGYi5Y+R6YCB6ZSZ6K+vOiB7ZX0iKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAxKQoKICAgICAgICBwcmludCgi6YCA5Ye65Y+R6YCB57q/56iLIikKCiAgICBkZWYgX3JlYWRpbmdfbG9vcChzZWxmKToKICAgICAgICAiIiLor7vlj5bnur/nqIvkuLvlvqrnjq8iIiIKICAgICAgICB3aGlsZSBzZWxmLmlzX3J1bm5pbmcgYW5kIG5vdCByb3NweS5pc19zaHV0ZG93bigpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB3aXRoIHNlbGYuc2VyaWFsX2xvY2s6CiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5zZXIgYW5kIHNlbGYuc2VyLmlzX29wZW46CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBzZWxmLnNlci5pbldhaXRpbmcoKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBuOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHNlbGYuc2VyLnJlYWQobikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggc2VsZi5kYXRhX2J1ZmZlcl9sb2NrOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YV9idWZmZXIgPSBzZWxmLmRhdGFfYnVmZmVyICsgZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcHJpbnQoZiLor7vlj5bliLDmlbDmja46IHtsZW4oZGF0YSl9IOWtl+iKgiwg57yT5Yay5Yy65oC76ZW/OiB7bGVuKHNlbGYuZGF0YV9idWZmZXIpfSIpCgogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChmIuivu+WPluW+queOr+mUmeivrzoge2V9IikKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4xKQoKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAwMSkgICMg55+t5pqC5LyR55yg6YG/5YWN6L+H5bqm5Y2g55SoQ1BVCgogICAgICAgIHByaW50KCLpgIDlh7ror7vlj5bnur/nqIsiKQoKICAgIGRlZiBfcGFyc2luZ19sb29wKHNlbGYpOgogICAgICAgICIiIuino+aekOe6v+eoi+S4u+W+queOryIiIgogICAgICAgIHdoaWxlIHNlbGYuaXNfcnVubmluZyBhbmQgbm90IHJvc3B5LmlzX3NodXRkb3duKCk6CiAgICAgICAgICAgIHdpdGggc2VsZi5kYXRhX2J1ZmZlcl9sb2NrOgogICAgICAgICAgICAgICAgaWYgbGVuKHNlbGYuZGF0YV9idWZmZXIpID4gMDoKICAgICAgICAgICAgICAgICAgICAjIHByaW50KGYi6Kej5p6Q5pWw5o2u57yT5Yay5Yy6OiB7bGVuKHNlbGYuZGF0YV9idWZmZXIpfSDlrZfoioIiKQogICAgICAgICAgICAgICAgICAgIHBhY2tldHMsIHJlbWFpbiA9IERBU1Byb3RvY29sLmZpbmRfcGFja2V0KHNlbGYuZGF0YV9idWZmZXIpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhX2J1ZmZlciA9IHJlbWFpbgogICAgICAgICAgICAgICAgICAgICMgcHJpbnQoInBhY2tldHM6ICIsIHBhY2tldHMpCiAgICAgICAgICAgICAgICAgICAgZm9yIHBhY2tldCBpbiBwYWNrZXRzOgogICAgICAgICAgICAgICAgICAgICAgICBwYWNrID0gTWVzc2FnZVBhY2sudW5wYWNrKHBhY2tldCkKICAgICAgICAgICAgICAgICAgICAgICAgIyBwcmludCgicGFjazogIiwgcGFjaykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHBhY2s6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHJlY29yZCBpbiBwYWNrLnJlY29yZHNfOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVjb3JkLnJlY29yZF90eXBlID09IFJlY29yZFR5cGUuVGFjdGlsZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRhY3RpbGVfY2FsbGJhY2socmVjb3JkLnJlY29yZF9kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiByZWNvcmQucmVjb3JkX3R5cGUgPT0gUmVjb3JkVHlwZS5FbmNvZGVyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZW5jb2Rlcl9jYWxsYmFjayhyZWNvcmQucmVjb3JkX2RhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHJlY29yZC5yZWNvcmRfdHlwZSA9PSBSZWNvcmRUeXBlLkVjaG86CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lY2hvX2NhbGxiYWNrKHJlY29yZC5yZWNvcmRfZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZy5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlY29yZCB0eXBlOnt9IGludmFsaWQgISIuZm9ybWF0KHJlY29yZC5yZWNvcmRfdHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICB0aW1lLnNsZWVwKDAuMDEpICAjIOmBv+WFjei/h+W6puWNoOeUqENQVQoKICAgICAgICBwcmludCgi6YCA5Ye66Kej5p6Q57q/56iLIikKCiAgICBkZWYgX3NlbmRfZW5jb2Rlcl9sb29wKHNlbGYpOgogICAgICAgICIiIue8lueggeWZqOW+queOr+e6v+eoiyAtIOS9v+eUqFJPU+iuoumYheeahOeUteacuuinkuW6piIiIgogICAgICAgIGlmIG5vdCBzZWxmLmVuY29kZXJfZnJlcToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIAogICAgICAgIGludGVydmFsID0gMS4wIC8gc2VsZi5lbmNvZGVyX2ZyZXEKICAgICAgICBwcmludChmIue8lueggeWZqOW+queOr+WQr+WKqO+8jOmikeeOhzoge3NlbGYuZW5jb2Rlcl9mcmVxfUh6LCDpl7TpmpQ6IHtpbnRlcnZhbDouM2Z9cyIpCiAgICAgICAgCiAgICAgICAgd2hpbGUgc2VsZi5pc19ydW5uaW5nIGFuZCBub3Qgcm9zcHkuaXNfc2h1dGRvd24oKToKICAgICAgICAgICAgc3RhcnRfdGltZSA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOS4i+WPkei3neemu+aMh+S7pOWIsOeUteacugogICAgICAgICAgICB3aXRoIHNlbGYuYW5nbGVfbG9jazoKICAgICAgICAgICAgICAgIGRpc190YXJnZXQgPSBzZWxmLmdyaXBwZXJfZGlzCiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLmFkZF9jbWQoCiAgICAgICAgICAgICAgICBDbWRQYWNrLnBhY2soCiAgICAgICAgICAgICAgICAgICAgb3Bjb2RlPU9wY29kZS5SZWFkQmF0Y2gsIAogICAgICAgICAgICAgICAgICAgIHJlY29yZF90eXBlPVJlY29yZFR5cGUuRW5jb2RlciwgCiAgICAgICAgICAgICAgICAgICAgcmVjb3JkPXN0cnVjdC5wYWNrKCI+ZiIsIGRpc190YXJnZXQpCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOeyvuehruaOp+WItumXtOmalOaXtumXtAogICAgICAgICAgICBlbGFwc2VkID0gdGltZS50aW1lKCkgLSBzdGFydF90aW1lCiAgICAgICAgICAgIHNsZWVwX3RpbWUgPSBtYXgoMCwgaW50ZXJ2YWwgLSBlbGFwc2VkKQogICAgICAgICAgICBpZiBzbGVlcF90aW1lID4gMDoKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoc2xlZXBfdGltZSkKCiAgICAgICAgcHJpbnQoIumAgOWHuue8lueggeWZqOW+queOr+e6v+eoiyIpCgogICAgZGVmIF9zZW5kX3RhY3RpbGVfbG9vcChzZWxmKToKICAgICAgICAiIiLop6bop4nlvqrnjq/nur/nqIsiIiIKICAgICAgICBpZiBub3Qgc2VsZi50YWN0aWxlX2ZyZXE6CiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAKICAgICAgICBpbnRlcnZhbCA9IDEuMCAvIHNlbGYudGFjdGlsZV9mcmVxCiAgICAgICAgcHJpbnQoZiLop6bop4nlvqrnjq/lkK/liqjvvIzpopHnjoc6IHtzZWxmLnRhY3RpbGVfZnJlcX1Ieiwg6Ze06ZqUOiB7aW50ZXJ2YWw6LjNmfXMiKQogICAgICAgIAogICAgICAgIHdoaWxlIHNlbGYuaXNfcnVubmluZyBhbmQgbm90IHJvc3B5LmlzX3NodXRkb3duKCk6CiAgICAgICAgICAgIHN0YXJ0X3RpbWUgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICBzZWxmLmFkZF9jbWQoCiAgICAgICAgICAgICAgICBDbWRQYWNrLnBhY2sob3Bjb2RlPU9wY29kZS5SZWFkU2luZ2xlLCByZWNvcmRfdHlwZT1SZWNvcmRUeXBlLlRhY3RpbGUsIHJlY29yZD1zdHJ1Y3QucGFjaygiPmYiLCAwLjApKQogICAgICAgICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOeyvuehruaOp+WItumXtOmalOaXtumXtAogICAgICAgICAgICBlbGFwc2VkID0gdGltZS50aW1lKCkgLSBzdGFydF90aW1lCiAgICAgICAgICAgIHNsZWVwX3RpbWUgPSBtYXgoMCwgaW50ZXJ2YWwgLSBlbGFwc2VkKQogICAgICAgICAgICBpZiBzbGVlcF90aW1lID4gMDoKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoc2xlZXBfdGltZSkKCiAgICAgICAgcHJpbnQoIumAgOWHuuinpuinieW+queOr+e6v+eoiyIpCgogICAgZGVmIHN0b3Aoc2VsZik6CiAgICAgICAgIiIi5YGc5q2i5omA5pyJ57q/56iLIiIiCiAgICAgICAgcHJpbnQoIuato+WcqOWBnOatouaJgOaciee6v+eoiy4uLiIpCiAgICAgICAgc2VsZi5pc19ydW5uaW5nID0gRmFsc2UKICAgICAgICAKICAgICAgICAjIOetieW+heaJgOaciee6v+eoi+e7k+adnwogICAgICAgIHRocmVhZHNfdG9fam9pbiA9IFtdCiAgICAgICAgaWYgc2VsZi5yZWFkX3RocmVhZCBhbmQgc2VsZi5yZWFkX3RocmVhZC5pc19hbGl2ZSgpOgogICAgICAgICAgICB0aHJlYWRzX3RvX2pvaW4uYXBwZW5kKHNlbGYucmVhZF90aHJlYWQpCiAgICAgICAgaWYgc2VsZi5zZW5kX3RocmVhZCBhbmQgc2VsZi5zZW5kX3RocmVhZC5pc19hbGl2ZSgpOgogICAgICAgICAgICB0aHJlYWRzX3RvX2pvaW4uYXBwZW5kKHNlbGYuc2VuZF90aHJlYWQpCiAgICAgICAgaWYgc2VsZi5wYXJzZV90aHJlYWQgYW5kIHNlbGYucGFyc2VfdGhyZWFkLmlzX2FsaXZlKCk6CiAgICAgICAgICAgIHRocmVhZHNfdG9fam9pbi5hcHBlbmQoc2VsZi5wYXJzZV90aHJlYWQpCiAgICAgICAgaWYgc2VsZi5lbmNvZGVyX3RocmVhZCBhbmQgc2VsZi5lbmNvZGVyX3RocmVhZC5pc19hbGl2ZSgpOgogICAgICAgICAgICB0aHJlYWRzX3RvX2pvaW4uYXBwZW5kKHNlbGYuZW5jb2Rlcl90aHJlYWQpCiAgICAgICAgaWYgc2VsZi50YWN0aWxlX3RocmVhZCBhbmQgc2VsZi50YWN0aWxlX3RocmVhZC5pc19hbGl2ZSgpOgogICAgICAgICAgICB0aHJlYWRzX3RvX2pvaW4uYXBwZW5kKHNlbGYudGFjdGlsZV90aHJlYWQpCiAgICAgICAgCiAgICAgICAgZm9yIHRocmVhZCBpbiB0aHJlYWRzX3RvX2pvaW46CiAgICAgICAgICAgIHRocmVhZC5qb2luKHRpbWVvdXQ9MikKICAgICAgICAgICAgcHJpbnQoZiLnur/nqIsge3RocmVhZC5uYW1lfSDlt7LlgZzmraIiKQogICAgICAgIAogICAgICAgIGlmIHNlbGYuc2VyIGFuZCBzZWxmLnNlci5pc19vcGVuOgogICAgICAgICAgICBzZWxmLnNlci5jbG9zZSgpCiAgICAgICAgICAgIHByaW50KCLkuLLlj6Plt7LlhbPpl60iKQogICAgICAgIAogICAgICAgIHByaW50KCLmiYDmnInnur/nqIvlt7LlgZzmraIiKQoKICAgIGRlZiBnZXRfc2VyaWFsX2luZm8oc2VsZik6CiAgICAgICAgIiIi6I635Y+W5Liy5Y+j5L+h5oGvIiIiCiAgICAgICAgaWYgc2VsZi5zZXIgYW5kIHNlbGYuc2VyLmlzX29wZW46CiAgICAgICAgICAgIGluZm8gPSB7CiAgICAgICAgICAgICAgICAidHR5X3BvcnQiOiBzZWxmLnNlci50dHlfcG9ydCwKICAgICAgICAgICAgICAgICJiYXVkcmF0ZSI6IHNlbGYuc2VyLmJhdWRyYXRlLAogICAgICAgICAgICAgICAgImJ5dGVzaXplIjogc2VsZi5zZXIuYnl0ZXNpemUsCiAgICAgICAgICAgICAgICAicGFyaXR5Ijogc2VsZi5zZXIucGFyaXR5LAogICAgICAgICAgICAgICAgInN0b3BiaXRzIjogc2VsZi5zZXIuc3RvcGJpdHMsCiAgICAgICAgICAgICAgICAidGltZW91dCI6IHNlbGYuc2VyLnRpbWVvdXQsCiAgICAgICAgICAgICAgICAiaW5fd2FpdGluZyI6IHNlbGYuc2VyLmluX3dhaXRpbmcsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGluZm8KICAgICAgICByZXR1cm4gTm9uZQoKZGVmIGNoZWNrX2FuZF9maXhfcGVybWlzc2lvbihwb3J0KToKICAgICIiIuajgOafpeW5tuS/ruWkjeS4suWPo+iuvuWkh+adg+mZkCIiIgogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHBvcnQpOgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICAjIOajgOafpeW9k+WJjeeUqOaIt+aYr+WQpuacieivu+WGmeadg+mZkAogICAgaWYgb3MuYWNjZXNzKHBvcnQsIG9zLlJfT0sgfCBvcy5XX09LKToKICAgICAgICByZXR1cm4gVHJ1ZQogICAgCiAgICBwcmludChmIuWwneivleS/ruWkjSB7cG9ydH0g55qE5p2D6ZmQLi4uIikKICAgIHRyeToKICAgICAgICAjIOWwneivleS/ruaUueadg+mZkAogICAgICAgIHN1YnByb2Nlc3MucnVuKFsnc3VkbycsICdjaG1vZCcsICc2NjYnLCBwb3J0XSwgY2hlY2s9VHJ1ZSkKICAgICAgICBwcmludChmIuadg+mZkOS/ruWkjeaIkOWKnzoge3BvcnR9IikKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZXhjZXB0IHN1YnByb2Nlc3MuQ2FsbGVkUHJvY2Vzc0Vycm9yOgogICAgICAgIHByaW50KGYi5p2D6ZmQ5L+u5aSN5aSx6LSl77yM6K+35omL5Yqo5omn6KGMOiBzdWRvIGNobW9kIDY2NiB7cG9ydH0iKQogICAgICAgIHJldHVybiBGYWxzZQoKZGVmIGZpbmRfc2VyaWFsX3BvcnQocGF0dGVybj0idHR5VVNCIiwgbWF4X3JldHJpZXM9MywgcmV0cnlfaW50ZXJ2YWw9Mik6CiAgICAiIiIKICAgIOiHquWKqOafpeaJvuWMuemFjeaooeW8j+eahOS4suWPo+iuvuWkh++8jOaUr+aMgemHjeivleacuuWItgogICAgIiIiCiAgICBmb3IgYXR0ZW1wdCBpbiByYW5nZShtYXhfcmV0cmllcyk6CiAgICAgICAgcG9ydHMgPSBsaXN0KHNlcmlhbC50b29scy5saXN0X3BvcnRzLmNvbXBvcnRzKCkpCiAgICAgICAgCiAgICAgICAgbWF0Y2hpbmdfcG9ydHMgPSBbXQogICAgICAgIGZvciBwb3J0IGluIHBvcnRzOgogICAgICAgICAgICBpZiBwYXR0ZXJuIGluIHBvcnQuZGV2aWNlOgogICAgICAgICAgICAgICAgbWF0Y2hpbmdfcG9ydHMuYXBwZW5kKHBvcnQuZGV2aWNlKQogICAgICAgIAogICAgICAgICMg5oyJ5pWw5a2X5ZCO57yA5o6S5bqPCiAgICAgICAgbWF0Y2hpbmdfcG9ydHMuc29ydChrZXk9bGFtYmRhIHg6IGludCh4LnJlcGxhY2UoZiIvZGV2L3twYXR0ZXJufSIsICIiKSkgaWYgeC5yZXBsYWNlKGYiL2Rldi97cGF0dGVybn0iLCAiIikuaXNkaWdpdCgpIGVsc2UgLTEpCiAgICAgICAgCiAgICAgICAgaWYgbWF0Y2hpbmdfcG9ydHM6CiAgICAgICAgICAgIHByaW50KGYi5om+5Yiw5Liy5Y+j6K6+5aSHOiB7bWF0Y2hpbmdfcG9ydHN9IikKICAgICAgICAgICAgIyDmo4Dmn6XmnYPpmZDlubbov5Tlm57nrKzkuIDkuKrmnInmnYPpmZDnmoTorr7lpIcKICAgICAgICAgICAgZm9yIHBvcnQgaW4gbWF0Y2hpbmdfcG9ydHM6CiAgICAgICAgICAgICAgICBpZiBjaGVja19hbmRfZml4X3Blcm1pc3Npb24ocG9ydCk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvcnQKICAgICAgICAgICAgIyDlpoLmnpzpg73msqHmnInmnYPpmZDvvIzov5Tlm57nrKzkuIDkuKrorr7lpIfvvIjnlKjmiLfpnIDopoHmiYvliqjlpITnkIbmnYPpmZDvvIkKICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nX3BvcnRzWy0xXQogICAgICAgIAogICAgICAgIGlmIGF0dGVtcHQgPCBtYXhfcmV0cmllcyAtIDE6CiAgICAgICAgICAgIHByaW50KGYi56yse2F0dGVtcHQgKyAxfeasoeacquaJvuWIsOS4suWPo+iuvuWkh++8jHtyZXRyeV9pbnRlcnZhbH3np5LlkI7ph43or5UuLi4iKQogICAgICAgICAgICB0aW1lLnNsZWVwKHJldHJ5X2ludGVydmFsKQogICAgCiAgICBwcmludChmIue7j+i/h3ttYXhfcmV0cmllc33mrKHlsJ3or5XlkI7ku43mnKrmib7liLDkuLLlj6Porr7lpIciKQogICAgcmV0dXJuIE5vbmUKCmRlZiBtYWluKCk6CiAgICAjIOi/h+a7pFJPU+iHquWKqOa3u+WKoOeahOWPguaVsAogICAgcm9zX2FyZ3MgPSBbJ19fbmFtZTo9JywgJ19fbG9nOj0nLCAnX19tYXN0ZXI6PScsICdfX2lwOj0nXQogICAgZmlsdGVyZWRfYXJncyA9IFtdCiAgICAKICAgIGZvciBhcmcgaW4gc3lzLmFyZ3ZbMTpdOgogICAgICAgIGlmIG5vdCBhbnkoYXJnLnN0YXJ0c3dpdGgocm9zX2FyZykgZm9yIHJvc19hcmcgaW4gcm9zX2FyZ3MpOgogICAgICAgICAgICBmaWx0ZXJlZF9hcmdzLmFwcGVuZChhcmcpCiAgICAKICAgIHN5cy5hcmd2ID0gW3N5cy5hcmd2WzBdXSArIGZpbHRlcmVkX2FyZ3MKICAgIAogICAgIyDop6PmnpDlkb3ku6TooYzlj4LmlbAKICAgIGltcG9ydCBhcmdwYXJzZQogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoZGVzY3JpcHRpb249IkRBUyBpbnRlcmZhY2UiKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS1zZXJpYWwtcG9ydCIsIHR5cGU9c3RyLCBkZWZhdWx0PSIiLCAKICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJTZXJpYWwgcG9ydCBkZXZpY2UgKGUuZy4sIC9kZXYvdHR5VVNCMCkiKQogICAgYXJncywgdW5rbm93biA9IHBhcnNlci5wYXJzZV9rbm93bl9hcmdzKCkKICAgIAogICAgIyDlpoLmnpzmnInmjIflrprnmoTkuLLlj6PvvIzkvb/nlKjmjIflrprnmoQKICAgIHNlcmlhbF9wb3J0ID0gTm9uZQogICAgaWYgYXJncy5zZXJpYWxfcG9ydCBhbmQgYXJncy5zZXJpYWxfcG9ydCAhPSAiIjoKICAgICAgICBzZXJpYWxfcG9ydCA9IGFyZ3Muc2VyaWFsX3BvcnQKICAgICAgICBwcmludChmIuS9v+eUqOWRveS7pOihjOaMh+WumueahOS4suWPozoge3NlcmlhbF9wb3J0fSIpCiAgICBlbHNlOgogICAgICAgICMg5bCd6K+V5LuOUk9T5Y+C5pWw6I635Y+WCiAgICAgICAgdHJ5OgogICAgICAgICAgICByb3NweS5pbml0X25vZGUoJ2Rhc19yb3NfaW50ZXJmYWNlJywgYW5vbnltb3VzPVRydWUpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgCiAgICAgICAgIyDku45ST1Plj4LmlbDojrflj5bkuLLlj6MKICAgICAgICBzZXJpYWxfcG9ydCA9IHJvc3B5LmdldF9wYXJhbSgnfnNlcmlhbF9wb3J0JywgJycpCiAgICAgICAgaWYgc2VyaWFsX3BvcnQgYW5kIHNlcmlhbF9wb3J0ICE9ICIiOgogICAgICAgICAgICBwcmludChmIuS9v+eUqFJPU+WPguaVsOaMh+WumueahOS4suWPozoge3NlcmlhbF9wb3J0fSIpCiAgICAKICAgICMg5aaC5p6c6L+Y5rKh5pyJ5Liy5Y+j77yM5YiZ6L+b6KGM6Ieq5Yqo5qOA5rWLCiAgICBpZiBub3Qgc2VyaWFsX3BvcnQgb3Igc2VyaWFsX3BvcnQgPT0gIiI6CiAgICAgICAgIyA9PT09PT09PSDljp/mnInnmoToh6rliqjmo4DmtYvpgLvovpEgPT09PT09PT0KICAgICAgICAjIOesrOS4gOatpe+8muaPkOekuueUqOaIt+aPkuWFpVVTQuWkueeIqu+8jOetieW+heeUqOaIt+ehruiupAogICAgICAgIHByaW50KCI9Iio2MCkKICAgICAgICBwcmludCgiICAgICAgICAgIOivt+aPkuWFpeWNlVVTQuWkueeIquiuvuWkh+WIsOeUteiEkVVTQuaOpeWPoyAgICAgICAgICAiKQogICAgICAgIHByaW50KCI9Iio2MCkKICAgICAgICBpbnB1dCgi5o+S5YWl5a6M5oiQ5ZCO77yM6K+35oyJ44CQ5Zue6L2m6ZSu44CR57un57utLi4uIikKICAgICAgICAKICAgICAgICAjIOesrOS6jOatpe+8muW8gOWni+afpeaJvuS4suWPo+iuvuWkhwogICAgICAgIHByaW50KCJcbuato+WcqOajgOa1i1VTQuWkueeIquiuvuWkhy4uLiIpCiAgICAgICAgc2VyaWFsX3BvcnQgPSBmaW5kX3NlcmlhbF9wb3J0KCJ0dHlVU0IiKQogICAgICAgIAogICAgICAgIGlmIHNlcmlhbF9wb3J0IGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KCLinYwg5pyq5om+5Yiw5Y+v55So55qE5Liy5Y+j6K6+5aSH77yM6K+35qOA5p+l6K6+5aSH5piv5ZCm5q2j56Gu5o+S5YWlIikKICAgICAgICAgICAgcmV0dXJuCiAgICAKICAgICMg56Gu5L+d5Liy5Y+j5LiN5Li656m6CiAgICBpZiBub3Qgc2VyaWFsX3BvcnQ6CiAgICAgICAgcHJpbnQoIuKdjCDplJnor6/vvJrml6Dms5Xojrflj5bkuLLlj6Porr7lpIciKQogICAgICAgIHJldHVybgogICAgCiAgICBwcmludChmIuacgOe7iOS9v+eUqOeahOS4suWPozoge3NlcmlhbF9wb3J0fSIpCiAgICAKICAgICMg5Yib5bu6RGF0YUJ1c+WunuS+i++8jOS8oOmAkuS4suWPo+WPguaVsAogICAgYnVzID0gRGF0YUJ1cygKICAgICAgICB0dHlfcG9ydD1zZXJpYWxfcG9ydCwgICMg6L+Z6YeM5Lyg6YCS5oyH5a6a55qE5Liy5Y+jCiAgICAgICAgYmF1ZHJhdGU9OTIxNjAwLAogICAgICAgIGVuY29kZXJfZnJlcT01MCwKICAgICAgICAjIHRhY3RpbGVfZnJlcT0xMCwKICAgICkKCiAgICAjIOe7meiuvuWkh+S4gOS6m+WIneWni+WMluaXtumXtAogICAgdGltZS5zbGVlcCgxKQogICAgCiAgICB0cnk6CiAgICAgICAgIyDkvb/nlKhST1PnmoRzcGlu5p2l5L+d5oyB6IqC54K56L+Q6KGMCiAgICAgICAgcHJpbnQoIlxu4pyFIOiuvuWkh+WIneWni+WMluWujOaIkO+8jOeoi+W6j+ato+W4uOi/kOihjOS4re+8iOaMiUN0cmwrQ+mAgOWHuu+8iS4uLiIpCiAgICAgICAgcm9zcHkuc3BpbigpCiAgICAgICAgICAgIAogICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgIHByaW50KCJcbvCfm5Eg55So5oi35Lit5pat56iL5bqPIikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIlxu4p2MIOWPkeeUn+mUmeivrzoge2V9IikKICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkKICAgIGZpbmFsbHk6CiAgICAgICAgcHJpbnQoIlxu8J+UjCDmraPlnKjlgZzmraLorr7lpIflubblhbPpl63kuLLlj6MuLi4iKQogICAgICAgIGJ1cy5zdG9wKCkKICAgICAgICBwcmludCgi4pyFIOeoi+W6j+W3suWuieWFqOmAgOWHuiIpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigp
'''

def decode_and_execute():
    try:
        source_code = base64.b64decode(ENCODED_SOURCE).decode('utf-8')
        code = compile(source_code, 'databus_single.py', 'exec')
        
        module = types.ModuleType('databus_single')
        
        import builtins
        globals_dict = {
            '__name__': '__main__',
            '__file__': __file__,
            '__package__': None,
            '__builtins__': builtins,
        }
        
        exec(code, globals_dict)
        
        return module
    except Exception as e:
        print(f"解码错误: {e}")
        raise

def main():
    try:
        module = decode_and_execute()
        
        if hasattr(module, 'main'):
            sys.argv[0] = 'databus_single.py'
            module.main()
        else:
            # print("错误: 找不到main函数")
            sys.exit(1)
    except Exception as e:
        print(f"执行错误: {e}")
        import traceback
        traceback.print_exc()
        sys.exit(1)

if __name__ == '__main__':
    main()
